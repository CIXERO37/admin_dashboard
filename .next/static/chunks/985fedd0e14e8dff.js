(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,54943,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["default",()=>t],54943),e.s(["Search",()=>t],55436)},5629,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(47163);function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",e),...r})})}function s({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",e),...r})}function o({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function l({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function c({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}var d=e.i(94179),u=e.i(55436);function m({columns:e,data:d,className:m,currentPage:x=1,totalPages:p=1,onPageChange:h,onRowClick:g}){let f=p>1&&h,[v,b]=(0,r.useState)(null),[j,y]=(0,r.useState)(""),N=e=>{e.preventDefault();let t=parseInt(j,10);t>=1&&t<=p&&h&&h(t),b(null),y("")};return(0,t.jsxs)("div",{className:(0,n.cn)("rounded-xl border border-border bg-card overflow-hidden",m),children:[(0,t.jsxs)(a,{children:[(0,t.jsx)(s,{children:(0,t.jsx)(o,{className:"border-border bg-secondary/50 hover:bg-secondary/50",children:e.map(e=>(0,t.jsx)(l,{className:"text-muted-foreground font-medium",children:e.label},e.key))})}),(0,t.jsx)(i,{children:0===d.length?(0,t.jsx)(o,{children:(0,t.jsx)(c,{colSpan:e.length,className:"text-center py-8 text-muted-foreground",children:"No data available"})}):d.map((r,a)=>(0,t.jsx)(o,{className:(0,n.cn)("border-border transition-colors hover:bg-secondary/60",g&&"cursor-pointer"),onClick:()=>g?.(r),children:e.map(e=>(0,t.jsx)(c,{className:"text-foreground",children:e.render?e.render(r[e.key],r):r[e.key]},e.key))},a))})]}),f&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-border bg-secondary/30 px-6 py-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page"," ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:x})," ","of ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:p})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>h(x-1),disabled:1===x,className:(0,n.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",1===x?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[];if(p<=7)for(let t=1;t<=p;t++)e.push(t);else e.push(1),x<=3?e.push(2,3,4,"...",p):x>=p-2?e.push("...",p-3,p-2,p-1,p):e.push("...",x-1,x,x+1,"...",p);return e.map((e,r)=>{if("..."===e){let e=`ellipsis-${r}`;return v===e?(0,t.jsxs)("form",{onSubmit:N,className:"relative",children:[(0,t.jsx)(u.Search,{className:"absolute left-1.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none"}),(0,t.jsx)("input",{type:"number",min:1,max:p,value:j,onChange:e=>y(e.target.value),onBlur:()=>{b(null),y("")},autoFocus:!0,className:"w-14 h-9 pl-6 pr-1 text-sm text-center font-medium rounded-lg border border-primary bg-card text-foreground focus:outline-none focus:ring-1 focus:ring-primary [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]},e):(0,t.jsx)("button",{onClick:()=>b(e),className:"w-9 h-9 flex items-center justify-center text-sm text-muted-foreground hover:text-foreground hover:bg-secondary/80 rounded-lg border border-transparent hover:border-border transition-colors cursor-pointer",title:"Click to jump to page",children:"..."},e)}return(0,t.jsx)("button",{onClick:()=>h(e),className:(0,n.cn)("w-9 h-9 text-sm font-medium rounded-lg border transition-colors cursor-pointer",x===e?"border-primary bg-primary text-primary-foreground":"border-border bg-card text-foreground hover:bg-secondary/80"),children:e},e)})})()}),(0,t.jsx)("button",{onClick:()=>h(x+1),disabled:x===p,className:(0,n.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",x===p?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Next"})]})]})]})}function x({status:e}){let r={Active:"bg-[var(--success)]/20 text-[var(--success)] border-[var(--success)]/30",Pending:"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30","In Progress":"bg-primary/20 text-primary border-primary/30",Resolved:"bg-[var(--success)]/20 text-[var(--success)] border-[var(--success)]/30","Under Review":"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30",Hidden:"bg-muted text-muted-foreground border-border",Inactive:"bg-muted text-muted-foreground border-border",Blocked:"bg-destructive/20 text-destructive border-destructive/30",Draft:"bg-secondary text-secondary-foreground border-border"};return(0,t.jsx)(d.Badge,{variant:"outline",className:(0,n.cn)("font-medium",r[e]||r.Inactive),children:e})}function p({priority:e}){return(0,t.jsx)(d.Badge,{variant:"outline",className:(0,n.cn)("font-medium",{High:"bg-destructive/20 text-destructive border-destructive/30",Medium:"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30",Low:"bg-[var(--success)]/20 text-[var(--success)] border-[var(--success)]/30"}[e]||""),children:e})}e.s(["DataTable",()=>m,"PriorityBadge",()=>p,"StatusBadge",()=>x],5629)},30374,e=>{"use strict";var t=e.i(43476),r=e.i(26999),n=e.i(95926),a=e.i(47163);function s({...e}){return(0,t.jsx)(r.Root,{"data-slot":"dialog",...e})}function i({...e}){return(0,t.jsx)(r.Portal,{"data-slot":"dialog-portal",...e})}function o({className:e,...n}){return(0,t.jsx)(r.Overlay,{"data-slot":"dialog-overlay",className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...n})}function l({className:e,children:s,showCloseButton:l=!0,...c}){return(0,t.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(r.Content,{"data-slot":"dialog-content",className:(0,a.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...c,children:[s,l&&(0,t.jsxs)(r.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(n.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,a.cn)("flex flex-col gap-2 text-center sm:text-left",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,a.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...r})}function u({className:e,...n}){return(0,t.jsx)(r.Title,{"data-slot":"dialog-title",className:(0,a.cn)("text-lg leading-none font-semibold",e),...n})}function m({className:e,...n}){return(0,t.jsx)(r.Description,{"data-slot":"dialog-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...n})}e.s(["Dialog",()=>s,"DialogContent",()=>l,"DialogDescription",()=>m,"DialogFooter",()=>d,"DialogHeader",()=>c,"DialogTitle",()=>u])},74117,e=>{"use strict";var t=e.i(71645);let r=0,n=new Map,a=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},s=[],i={toasts:[]};function o(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),s.forEach(e=>{e(i)})}function l({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,r]=t.useState(i);return t.useEffect(()=>(s.push(r),()=>{let e=s.indexOf(r);e>-1&&s.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},23585,e=>{"use strict";let t=(0,e.i(75254).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},13766,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(81140),a=e.i(30030),s=e.i(42727),i=e.i(96626),o=e.i(48425),l=e.i(86318),c=e.i(69340),d=e.i(10772),u="Tabs",[m,x]=(0,a.createContextScope)(u,[s.createRovingFocusGroupScope]),p=(0,s.createRovingFocusGroupScope)(),[h,g]=m(u),f=r.forwardRef((e,r)=>{let{__scopeTabs:n,value:a,onValueChange:s,defaultValue:i,orientation:u="horizontal",dir:m,activationMode:x="automatic",...p}=e,g=(0,l.useDirection)(m),[f,v]=(0,c.useControllableState)({prop:a,onChange:s,defaultProp:i});return(0,t.jsx)(h,{scope:n,baseId:(0,d.useId)(),value:f,onValueChange:v,orientation:u,dir:g,activationMode:x,children:(0,t.jsx)(o.Primitive.div,{dir:g,"data-orientation":u,...p,ref:r})})});f.displayName=u;var v="TabsList",b=r.forwardRef((e,r)=>{let{__scopeTabs:n,loop:a=!0,...i}=e,l=g(v,n),c=p(n);return(0,t.jsx)(s.Root,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:a,children:(0,t.jsx)(o.Primitive.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:r})})});b.displayName=v;var j="TabsTrigger",y=r.forwardRef((e,r)=>{let{__scopeTabs:a,value:i,disabled:l=!1,...c}=e,d=g(j,a),u=p(a),m=D(d.baseId,i),x=T(d.baseId,i),h=i===d.value;return(0,t.jsx)(s.Item,{asChild:!0,...u,focusable:!l,active:h,children:(0,t.jsx)(o.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...c,ref:r,onMouseDown:(0,n.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(i)}),onKeyDown:(0,n.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(i)}),onFocus:(0,n.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||l||!e||d.onValueChange(i)})})})});y.displayName=j;var N="TabsContent",w=r.forwardRef((e,n)=>{let{__scopeTabs:a,value:s,forceMount:l,children:c,...d}=e,u=g(N,a),m=D(u.baseId,s),x=T(u.baseId,s),p=s===u.value,h=r.useRef(p);return r.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(i.Presence,{present:l||p,children:({present:r})=>(0,t.jsx)(o.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!r,id:x,tabIndex:0,...d,ref:n,style:{...e.style,animationDuration:h.current?"0s":void 0},children:r&&c})})});function D(e,t){return`${e}-trigger-${t}`}function T(e,t){return`${e}-content-${t}`}w.displayName=N;var C=e.i(47163);function k({className:e,...r}){return(0,t.jsx)(f,{"data-slot":"tabs",className:(0,C.cn)("flex flex-col gap-2",e),...r})}function S({className:e,...r}){return(0,t.jsx)(b,{"data-slot":"tabs-list",className:(0,C.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...r})}function M({className:e,...r}){return(0,t.jsx)(y,{"data-slot":"tabs-trigger",className:(0,C.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function A({className:e,...r}){return(0,t.jsx)(w,{"data-slot":"tabs-content",className:(0,C.cn)("flex-1 outline-none",e),...r})}var R=e.i(10980),_=e.i(61911),P=e.i(84614),I=e.i(18566),U=e.i(67240),B=e.i(27612),z=e.i(3116),E=e.i(23585),O=e.i(5629),F=e.i(67881),L=e.i(94179),q=e.i(23750),H=e.i(10708),V=e.i(63415),$=e.i(30374),G=e.i(74117),Q=e.i(95187),K=(0,Q.createServerReference)("4081c75cf88f2ddc93907ff67dcb125b8649c0a3c4",Q.callServer,void 0,Q.findSourceMapURL,"restoreQuizAction"),X=(0,Q.createServerReference)("407ca61b87210eed4b79eb399e1696f169c24d04db",Q.callServer,void 0,Q.findSourceMapURL,"permanentDeleteQuizAction");function J({initialData:e}){let n=(0,I.useRouter)(),{toast:a}=(0,G.useToast)(),[s,i]=(0,r.useTransition)(),[o,l]=(0,r.useState)({open:!1,item:null}),[c,d]=(0,r.useState)({open:!1,item:null,confirmText:""}),u=async()=>{if(!o.item)return;let{error:e}=await K(o.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"Quiz restored",description:`"${o.item.title}" has been restored to Master Data.`}),i(()=>n.refresh())),l({open:!1,item:null})},m=async()=>{if(!c.item||"Delete Permanently"!==c.confirmText)return;let{error:e}=await X(c.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"Quiz permanently deleted",description:`"${c.item.title}" has been permanently deleted.`,variant:"destructive"}),i(()=>n.refresh())),d({open:!1,item:null,confirmText:""})};if(0===e.length)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,t.jsx)(R.BookOpen,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"No quizzes in trash"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Deleted quizzes will appear here"})]});let x=[{key:"quiz",label:"Quiz",render:(e,r)=>{let n=r.title,a=r.category,s=r.questions_count;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:n}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a||"No category"," - ",s," questions"]})]})}},{key:"creator",label:"Creator",render:(e,r)=>{let n=r.creator;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:n?.fullname||"-"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:n?.email})]})}},{key:"deleted_at",label:"Deleted",render:e=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})})},{key:"time_left",label:"Time Left",render:(e,r)=>{let n,a,s=(n=new Date(new Date(r.deleted_at).getTime()+6048e5),a=new Date,Math.max(0,Math.ceil((n.getTime()-a.getTime())/864e5)));return(0,t.jsxs)(L.Badge,{variant:"outline",className:s<=2?"bg-destructive/10 text-destructive border-destructive/30":"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30",children:[(0,t.jsx)(z.Clock,{className:"mr-1 h-3 w-3"}),s," days left"]})}},{key:"action",label:"Action",render:(r,n)=>{let a=e.find(e=>e.id===n.id);return(0,t.jsxs)(V.DropdownMenu,{children:[(0,t.jsx)(V.DropdownMenuTrigger,{className:"focus:outline-none",children:(0,t.jsx)("div",{className:"cursor-pointer hover:opacity-80 p-1 rounded hover:bg-muted",children:(0,t.jsx)(E.MoreVertical,{className:"h-4 w-4 text-muted-foreground"})})}),(0,t.jsxs)(V.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&l({open:!0,item:a}),className:"cursor-pointer",children:[(0,t.jsx)(U.RotateCcw,{className:"h-4 w-4 mr-2"}),"Restore"]}),(0,t.jsx)(V.DropdownMenuSeparator,{}),(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&d({open:!0,item:a,confirmText:""}),className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,t.jsx)(B.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Permanently"]})]})]})}}],p=e.map(e=>({id:e.id,title:e.title,category:e.category,questions_count:e.questions_count,creator:e.creator,deleted_at:e.deleted_at}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:s?"opacity-60 pointer-events-none":"",children:(0,t.jsx)(O.DataTable,{columns:x,data:p})}),(0,t.jsx)($.Dialog,{open:o.open,onOpenChange:e=>l({open:e,item:o.item}),children:(0,t.jsxs)($.DialogContent,{children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{children:"Restore Quiz"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to restore "',o.item?.title,'"? The quiz will be returned to Master Data.']})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>l({open:!1,item:null}),children:"Cancel"}),(0,t.jsxs)(F.Button,{onClick:u,disabled:s,children:[(0,t.jsx)(U.RotateCcw,{className:"mr-2 h-4 w-4"}),"Restore"]})]})]})}),(0,t.jsx)($.Dialog,{open:c.open,onOpenChange:e=>d(t=>({...t,open:e,confirmText:""})),children:(0,t.jsxs)($.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{className:"text-destructive",children:"Permanent Delete"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to permanently delete "',c.item?.title,'"? This action cannot be undone.']})]}),(0,t.jsxs)("div",{className:"grid gap-2 py-4",children:[(0,t.jsxs)(H.Label,{htmlFor:"confirmDelete",children:["Type"," ",(0,t.jsx)("strong",{className:"text-destructive",children:"Delete Permanently"})," ","to confirm"]}),(0,t.jsx)(q.Input,{id:"confirmDelete",value:c.confirmText,onChange:e=>d(t=>({...t,confirmText:e.target.value})),placeholder:"Type 'Delete Permanently' here"})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>d(e=>({...e,open:!1,confirmText:""})),children:"Cancel"}),(0,t.jsx)(F.Button,{variant:"destructive",onClick:m,disabled:"Delete Permanently"!==c.confirmText||s,children:"Delete Permanently"})]})]})})]})}var W=e.i(63270),Y=(0,Q.createServerReference)("40d95eef1acaec33043c309207ab79073dd8a8959d",Q.callServer,void 0,Q.findSourceMapURL,"restoreUserAction"),Z=(0,Q.createServerReference)("4044d31b572a75606b9cbe24ad098a35315e8293bb",Q.callServer,void 0,Q.findSourceMapURL,"permanentDeleteUserAction");let ee={admin:"bg-primary/20 text-primary border-primary/30",user:"bg-secondary text-secondary-foreground border-border"};function et({initialData:e}){let n=(0,I.useRouter)(),{toast:a}=(0,G.useToast)(),[s,i]=(0,r.useTransition)(),[o,l]=(0,r.useState)({open:!1,item:null}),[c,d]=(0,r.useState)({open:!1,item:null,confirmText:""}),u=async()=>{if(!o.item)return;let{error:e}=await Y(o.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"User restored",description:`"${o.item.fullname||o.item.username}" has been restored.`}),i(()=>n.refresh())),l({open:!1,item:null})},m=async()=>{if(!c.item||"Delete Permanently"!==c.confirmText)return;let{error:e}=await Z(c.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"User permanently deleted",description:`"${c.item.fullname||c.item.username}" has been permanently deleted.`,variant:"destructive"}),i(()=>n.refresh())),d({open:!1,item:null,confirmText:""})};if(0===e.length)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,t.jsx)(P.User,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"No users in trash"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Deleted users will appear here"})]});let x=[{key:"user",label:"User",render:(e,r)=>{let n=r.fullname||r.username||"Unknown",a=r.email,s=r.avatar_url;return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(W.Avatar,{className:"h-9 w-9",children:[(0,t.jsx)(W.AvatarImage,{src:(0,C.getAvatarUrl)(s)}),(0,t.jsx)(W.AvatarFallback,{children:n.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:n}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:a})]})]})}},{key:"role",label:"Role",render:e=>{let r=e||"user";return(0,t.jsx)(L.Badge,{variant:"outline",className:ee[r.toLowerCase()]||ee.user,children:r.charAt(0).toUpperCase()+r.slice(1)})}},{key:"deleted_at",label:"Deleted",render:e=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})})},{key:"time_left",label:"Time Left",render:(e,r)=>{let n,a,s=(n=new Date(new Date(r.deleted_at).getTime()+6048e5),a=new Date,Math.max(0,Math.ceil((n.getTime()-a.getTime())/864e5)));return(0,t.jsxs)(L.Badge,{variant:"outline",className:s<=2?"bg-destructive/10 text-destructive border-destructive/30":"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30",children:[(0,t.jsx)(z.Clock,{className:"mr-1 h-3 w-3"}),s," days left"]})}},{key:"action",label:"Action",render:(r,n)=>{let a=e.find(e=>e.id===n.id);return(0,t.jsxs)(V.DropdownMenu,{children:[(0,t.jsx)(V.DropdownMenuTrigger,{className:"focus:outline-none",children:(0,t.jsx)("div",{className:"cursor-pointer hover:opacity-80 p-1 rounded hover:bg-muted",children:(0,t.jsx)(E.MoreVertical,{className:"h-4 w-4 text-muted-foreground"})})}),(0,t.jsxs)(V.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&l({open:!0,item:a}),className:"cursor-pointer",children:[(0,t.jsx)(U.RotateCcw,{className:"h-4 w-4 mr-2"}),"Restore"]}),(0,t.jsx)(V.DropdownMenuSeparator,{}),(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&d({open:!0,item:a,confirmText:""}),className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,t.jsx)(B.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Permanently"]})]})]})}}],p=e.map(e=>({id:e.id,fullname:e.fullname,username:e.username,email:e.email,avatar_url:e.avatar_url,role:e.role,deleted_at:e.deleted_at}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:s?"opacity-60 pointer-events-none":"",children:(0,t.jsx)(O.DataTable,{columns:x,data:p})}),(0,t.jsx)($.Dialog,{open:o.open,onOpenChange:e=>l({open:e,item:o.item}),children:(0,t.jsxs)($.DialogContent,{children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{children:"Restore User"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to restore "',o.item?.fullname||o.item?.username,'"? The user will be able to login again.']})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>l({open:!1,item:null}),children:"Cancel"}),(0,t.jsxs)(F.Button,{onClick:u,disabled:s,children:[(0,t.jsx)(U.RotateCcw,{className:"mr-2 h-4 w-4"}),"Restore"]})]})]})}),(0,t.jsx)($.Dialog,{open:c.open,onOpenChange:e=>d(t=>({...t,open:e,confirmText:""})),children:(0,t.jsxs)($.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{className:"text-destructive",children:"Permanent Delete"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to permanently delete "',c.item?.fullname||c.item?.username,'"? All user data including created quizzes will be deleted. This action cannot be undone.']})]}),(0,t.jsxs)("div",{className:"grid gap-2 py-4",children:[(0,t.jsxs)(H.Label,{htmlFor:"confirmDelete",children:["Type"," ",(0,t.jsx)("strong",{className:"text-destructive",children:"Delete Permanently"})," ","to confirm"]}),(0,t.jsx)(q.Input,{id:"confirmDelete",value:c.confirmText,onChange:e=>d(t=>({...t,confirmText:e.target.value})),placeholder:"Type 'Delete Permanently' here"})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>d(e=>({...e,open:!1,confirmText:""})),children:"Cancel"}),(0,t.jsx)(F.Button,{variant:"destructive",onClick:m,disabled:"Delete Permanently"!==c.confirmText||s,children:"Delete Permanently"})]})]})})]})}var er=(0,Q.createServerReference)("402e5e7aac7e4f3a93775ec57ffe83dc405f8860de",Q.callServer,void 0,Q.findSourceMapURL,"restoreGroupAction"),en=(0,Q.createServerReference)("40785ef2a20ca601aaf612e97871339c49bf97ae1e",Q.callServer,void 0,Q.findSourceMapURL,"permanentDeleteGroupAction");function ea({initialData:e}){let n=(0,I.useRouter)(),{toast:a}=(0,G.useToast)(),[s,i]=(0,r.useTransition)(),[o,l]=(0,r.useState)({open:!1,item:null}),[c,d]=(0,r.useState)({open:!1,item:null,confirmText:""}),u=async()=>{if(!o.item)return;let{error:e}=await er(o.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"Group restored",description:`"${o.item.name}" has been restored.`}),i(()=>n.refresh())),l({open:!1,item:null})},m=async()=>{if(!c.item||"Delete Permanently"!==c.confirmText)return;let{error:e}=await en(c.item.id);e?a({title:"Error",description:e,variant:"destructive"}):(a({title:"Group permanently deleted",description:`"${c.item.name}" has been permanently deleted.`,variant:"destructive"}),i(()=>n.refresh())),d({open:!1,item:null,confirmText:""})};if(0===e.length)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,t.jsx)(_.Users,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-medium",children:"No groups in trash"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Deleted groups will appear here"})]});let x=[{key:"group",label:"Group",render:(e,r)=>{let n=r.name,a=r.description,s=r.avatar_url;return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(W.Avatar,{className:"h-9 w-9",children:[(0,t.jsx)(W.AvatarImage,{src:(0,C.getAvatarUrl)(s)}),(0,t.jsx)(W.AvatarFallback,{children:n.charAt(0).toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:n}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground line-clamp-1",children:a||"No description"})]})]})}},{key:"creator",label:"Creator",render:(e,r)=>{let n=r.creator;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:n?.fullname||"-"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:n?.email})]})}},{key:"member_count",label:"Members",render:e=>(0,t.jsxs)(L.Badge,{variant:"secondary",children:[(0,t.jsx)(_.Users,{className:"mr-1 h-3 w-3"}),e]})},{key:"deleted_at",label:"Deleted",render:e=>(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})})},{key:"time_left",label:"Time Left",render:(e,r)=>{let n,a,s=(n=new Date(new Date(r.deleted_at).getTime()+6048e5),a=new Date,Math.max(0,Math.ceil((n.getTime()-a.getTime())/864e5)));return(0,t.jsxs)(L.Badge,{variant:"outline",className:s<=2?"bg-destructive/10 text-destructive border-destructive/30":"bg-[var(--warning)]/20 text-[var(--warning)] border-[var(--warning)]/30",children:[(0,t.jsx)(z.Clock,{className:"mr-1 h-3 w-3"}),s," days left"]})}},{key:"action",label:"Action",render:(r,n)=>{let a=e.find(e=>e.id===n.id);return(0,t.jsxs)(V.DropdownMenu,{children:[(0,t.jsx)(V.DropdownMenuTrigger,{className:"focus:outline-none",children:(0,t.jsx)("div",{className:"cursor-pointer hover:opacity-80 p-1 rounded hover:bg-muted",children:(0,t.jsx)(E.MoreVertical,{className:"h-4 w-4 text-muted-foreground"})})}),(0,t.jsxs)(V.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&l({open:!0,item:a}),className:"cursor-pointer",children:[(0,t.jsx)(U.RotateCcw,{className:"h-4 w-4 mr-2"}),"Restore"]}),(0,t.jsx)(V.DropdownMenuSeparator,{}),(0,t.jsxs)(V.DropdownMenuItem,{onClick:()=>a&&d({open:!0,item:a,confirmText:""}),className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,t.jsx)(B.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Permanently"]})]})]})}}],p=e.map(e=>({id:e.id,name:e.name,description:e.description,avatar_url:e.avatar_url,member_count:e.member_count,creator:e.creator,deleted_at:e.deleted_at}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:s?"opacity-60 pointer-events-none":"",children:(0,t.jsx)(O.DataTable,{columns:x,data:p})}),(0,t.jsx)($.Dialog,{open:o.open,onOpenChange:e=>l({open:e,item:o.item}),children:(0,t.jsxs)($.DialogContent,{children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{children:"Restore Group"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to restore "',o.item?.name,'"? The group and all its members will be restored.']})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>l({open:!1,item:null}),children:"Cancel"}),(0,t.jsxs)(F.Button,{onClick:u,disabled:s,children:[(0,t.jsx)(U.RotateCcw,{className:"mr-2 h-4 w-4"}),"Restore"]})]})]})}),(0,t.jsx)($.Dialog,{open:c.open,onOpenChange:e=>d(t=>({...t,open:e,confirmText:""})),children:(0,t.jsxs)($.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)($.DialogHeader,{children:[(0,t.jsx)($.DialogTitle,{className:"text-destructive",children:"Permanent Delete"}),(0,t.jsxs)($.DialogDescription,{children:['Are you sure you want to permanently delete "',c.item?.name,'"? All group data including members and activities will be deleted. This action cannot be undone.']})]}),(0,t.jsxs)("div",{className:"grid gap-2 py-4",children:[(0,t.jsxs)(H.Label,{htmlFor:"confirmDelete",children:["Type"," ",(0,t.jsx)("strong",{className:"text-destructive",children:"Delete Permanently"})," ","to confirm"]}),(0,t.jsx)(q.Input,{id:"confirmDelete",value:c.confirmText,onChange:e=>d(t=>({...t,confirmText:e.target.value})),placeholder:"Type 'Delete Permanently' here"})]}),(0,t.jsxs)($.DialogFooter,{children:[(0,t.jsx)(F.Button,{variant:"outline",onClick:()=>d(e=>({...e,open:!1,confirmText:""})),children:"Cancel"}),(0,t.jsx)(F.Button,{variant:"destructive",onClick:m,disabled:"Delete Permanently"!==c.confirmText||s,children:"Delete Permanently"})]})]})})]})}function es({initialQuizzes:e,initialUsers:n,initialGroups:a}){let[s,i]=(0,r.useState)("quiz");return(0,t.jsxs)(k,{value:s,onValueChange:i,children:[(0,t.jsxs)(S,{className:"grid w-full grid-cols-3 lg:w-[400px]",children:[(0,t.jsxs)(M,{value:"quiz",className:"flex items-center gap-2",children:[(0,t.jsx)(R.BookOpen,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Quiz"}),(0,t.jsx)("span",{className:"ml-1 text-xs bg-sidebar-accent/50 text-muted-foreground px-1.5 py-0.5 rounded-full",children:e.length})]}),(0,t.jsxs)(M,{value:"user",className:"flex items-center gap-2",children:[(0,t.jsx)(P.User,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"User"}),(0,t.jsx)("span",{className:"ml-1 text-xs bg-sidebar-accent/50 text-muted-foreground px-1.5 py-0.5 rounded-full",children:n.length})]}),(0,t.jsxs)(M,{value:"group",className:"flex items-center gap-2",children:[(0,t.jsx)(_.Users,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Group"}),(0,t.jsx)("span",{className:"ml-1 text-xs bg-sidebar-accent/50 text-muted-foreground px-1.5 py-0.5 rounded-full",children:a.length})]})]}),(0,t.jsx)(A,{value:"quiz",className:"mt-4",children:(0,t.jsx)(J,{initialData:e})}),(0,t.jsx)(A,{value:"user",className:"mt-4",children:(0,t.jsx)(et,{initialData:n})}),(0,t.jsx)(A,{value:"group",className:"mt-4",children:(0,t.jsx)(ea,{initialData:a})})]})}e.s(["TrashBinTabs",()=>es],13766)}]);