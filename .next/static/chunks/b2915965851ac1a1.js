(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51196,e=>{"use strict";var r=e.i(43476),t=e.i(47163),s=e.i(22016);function a({title:e,value:a,change:i,changeType:o="neutral",icon:n,description:l,href:c}){let d=(0,t.cn)("group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20",c&&"cursor-pointer block"),u=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/80 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,r.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e}),(0,r.jsx)("p",{className:"text-3xl font-bold tracking-tight text-foreground",suppressHydrationWarning:!0,children:a}),i&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:(0,t.cn)("text-xs font-medium","increase"===o&&"text-[var(--success)]","decrease"===o&&"text-destructive","neutral"===o&&"text-muted-foreground"),children:i}),l&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:l})]})]}),(0,r.jsx)("div",{className:"rounded-lg bg-primary/10 p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,r.jsx)(n,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})})]})]});return c?(0,r.jsx)(s.default,{href:c,className:d,children:u}):(0,r.jsx)("div",{className:d,children:u})}e.s(["StatCard",()=>a])},51887,e=>{"use strict";var r=e.i(43476);function t({title:e,description:t,action:s}){return(0,r.jsxs)("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:e}),t&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:t})]}),s&&(0,r.jsx)("div",{className:"mt-2 sm:mt-0",children:s})]})}e.s(["SectionHeader",()=>t])},44540,e=>{"use strict";var r=e.i(43476),t=e.i(22016);let s=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function a({title:e,description:a,href:i,icon:o,stats:n}){return(0,r.jsx)(t.default,{href:i,children:(0,r.jsx)("div",{className:"group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20 hover:-translate-y-1",children:(0,r.jsxs)("div",{className:"relative space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"rounded-lg bg-secondary p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,r.jsx)(o,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})}),n&&(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:e}),(0,r.jsx)("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:a})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm font-medium text-primary opacity-0 transition-all duration-300 group-hover:opacity-100",children:[(0,r.jsx)("span",{children:"View details"}),(0,r.jsx)(s,{className:"ml-1 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"})]})]})})})}e.s(["ActionCard",()=>a],44540)},37167,e=>{"use strict";var r=e.i(71645),t=e.i(15940);function s(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=new AbortController,r=(0,t.getSupabaseBrowserClient)();return async function(){try{i(!0),n(null);let{data:t,error:a}=await r.from("profiles").select("*, state:states(name), city:cities(name)").order("last_active",{ascending:!1,nullsFirst:!1}).abortSignal(e.signal);if(a){if(a.message.includes("aborted")||"AbortError"===a.name)return;n(a.message),s([])}else s(t??[]);i(!1)}catch(e){if(e instanceof Error&&("AbortError"===e.name||e.message.includes("aborted")))return;n(e instanceof Error?e.message:"An error occurred"),i(!1)}}(),()=>e.abort()},[]),{data:e,loading:a,error:o,aggregates:(0,r.useMemo)(()=>({countries:[],provinces:[]}),[]),updateProfile:async(e,r)=>{let a=(0,t.getSupabaseBrowserClient)();s(t=>t.map(t=>t.id===e?{...t,...r}:t));let{error:i}=await a.from("profiles").update(r).eq("id",e);return i?(console.error("Error updating profile:",i),{error:i}):{error:null}},deleteProfile:async e=>{let r=(0,t.getSupabaseBrowserClient)();s(r=>r.filter(r=>r.id!==e));let{error:a}=await r.from("profiles").delete().eq("id",e);return a?(console.error("Error deleting profile:",a),{error:a}):{error:null}}}}e.s(["useProfiles",()=>s])},41130,e=>{"use strict";var r=e.i(43476),t=e.i(10980),s=e.i(48256),a=e.i(46897),i=e.i(58041),o=e.i(51196),n=e.i(44540),l=e.i(51887),c=e.i(71645),d=e.i(15940),u=e.i(37167);function m(){let{data:e}=function(){let[e,r]=(0,c.useState)([]),[t,s]=(0,c.useState)(!0),[a,i]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let e=new AbortController,t=(0,d.getSupabaseBrowserClient)();return async function(){try{s(!0),i(null);let{data:a,error:o}=await t.from("quizzes").select("id, title, category, questions, is_hidden, is_public, created_at, language, creator:profiles!creator_id(email, fullname, avatar_url)").order("created_at",{ascending:!1}).abortSignal(e.signal);if(o){if(o.message.includes("aborted")||"AbortError"===o.name)return;i(o.message),r([])}else r((a??[]).map(e=>({...e,creator:Array.isArray(e.creator)?e.creator[0]:e.creator})));s(!1)}catch(e){if(e instanceof Error&&("AbortError"===e.name||e.message.includes("aborted")))return;i(e instanceof Error?e.message:"An error occurred"),s(!1)}}(),()=>e.abort()},[]),{data:e,loading:t,error:a,updateQuiz:async(e,t)=>{let s=(0,d.getSupabaseBrowserClient)();r(r=>r.map(r=>r.id===e?{...r,...t}:r));let{error:a}=await s.from("quizzes").update(t).eq("id",e);return a?(console.error("Error updating quiz:",a),{error:a}):{error:null}},deleteQuiz:async e=>{let t=(0,d.getSupabaseBrowserClient)();r(r=>r.filter(r=>r.id!==e));let{error:s}=await t.from("quizzes").delete().eq("id",e);return s?(console.error("Error deleting quiz:",s),{error:s}):{error:null}}}}(),{aggregates:m}=(0,u.useProfiles)(),g=e.filter(e=>!e.is_hidden),p=m?.countries.length??0,h=m?.provinces.length??0,x=e.length+p+h;return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Master Data Dashboard"})}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(o.StatCard,{title:"Quizzes",value:e.length,change:`${g.length} visible`,changeType:"neutral",icon:t.BookOpen}),(0,r.jsx)(o.StatCard,{title:"Countries",value:p,icon:s.Globe}),(0,r.jsx)(o.StatCard,{title:"Locations",value:h,icon:a.MapPin}),(0,r.jsx)(o.StatCard,{title:"Records",value:x,change:"Quizzes + locations",changeType:"neutral",icon:i.Database})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.SectionHeader,{title:"Master Data Modules",description:"Quick access to all master data"}),(0,r.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)(n.ActionCard,{title:"Quiz Data",description:"Manage quiz content and settings",href:"/master/quiz",icon:t.BookOpen,stats:`${e.length} quizzes`}),(0,r.jsx)(n.ActionCard,{title:"Country Data",description:"Aggregate users per country",href:"/master/country",icon:s.Globe,stats:`${p} countries`}),(0,r.jsx)(n.ActionCard,{title:"Location Data",description:"Profile locations with coordinates",href:"/master/province",icon:a.MapPin,stats:`${h} locations`})]})]})]})}e.s(["default",()=>m],41130)}]);