(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,r)=>{"use strict";var a=e.r(71645),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,n=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=s({inst:{value:r,getSnapshot:t}}),i=a[0].inst,d=a[1];return o(function(){i.value=r,i.getSnapshot=t,c(i)&&d({inst:i})},[e,r,t]),n(function(){return c(i)&&d({inst:i}),e(function(){c(i)&&d({inst:i})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},44540,e=>{"use strict";var t=e.i(43476),r=e.i(22016);let a=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function i({title:e,description:i,href:s,icon:n,stats:o}){return(0,t.jsx)(r.default,{href:s,children:(0,t.jsx)("div",{className:"group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20 hover:-translate-y-1",children:(0,t.jsxs)("div",{className:"relative space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"rounded-lg bg-secondary p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,t.jsx)(n,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})}),o&&(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:e}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:i})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm font-medium text-primary opacity-0 transition-all duration-300 group-hover:opacity-100",children:[(0,t.jsx)("span",{children:"View details"}),(0,t.jsx)(a,{className:"ml-1 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"})]})]})})})}e.s(["ActionCard",()=>i],44540)},51887,e=>{"use strict";var t=e.i(43476);function r({title:e,description:r,action:a}){return(0,t.jsxs)("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:e}),r&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:r})]}),a&&(0,t.jsx)("div",{className:"mt-2 sm:mt-0",children:a})]})}e.s(["SectionHeader",()=>r])},64476,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>n,"CardFooter",()=>l,"CardHeader",()=>i,"CardTitle",()=>s])},51196,e=>{"use strict";var t=e.i(43476),r=e.i(47163),a=e.i(22016);function i({title:e,value:i,change:s,changeType:n="neutral",icon:o,description:l,href:c}){let d=(0,r.cn)("group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20",c&&"cursor-pointer block"),u=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/80 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,t.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e}),(0,t.jsx)("p",{className:"text-3xl font-bold tracking-tight text-foreground",suppressHydrationWarning:!0,children:i}),s&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:(0,r.cn)("text-xs font-medium","increase"===n&&"text-[var(--success)]","decrease"===n&&"text-destructive","neutral"===n&&"text-muted-foreground"),children:s}),l&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:l})]})]}),(0,t.jsx)("div",{className:"rounded-lg bg-primary/10 p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,t.jsx)(o,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})})]})]});return c?(0,t.jsx)(a.default,{href:c,className:d,children:u}):(0,t.jsx)("div",{className:d,children:u})}e.s(["StatCard",()=>i])},41130,e=>{"use strict";var t=e.i(43476),r=e.i(10980),a=e.i(48256),i=e.i(46897),s=e.i(58041),n=e.i(51196),o=e.i(44540),l=e.i(51887),c=e.i(71645),d=e.i(15940),u=e.i(37167),x=e.i(75225),h=e.i(9694),m=e.i(72526),f=e.i(85183),p=e.i(93230),g=e.i(64476),v=e.i(73921);let j={value:{label:"Count",color:"var(--chart-1)"}},y=e=>{let{x:r,y:a,payload:i}=e,s=i.value,n=s.split(" "),o=[],l=n[0];for(let e=1;e<n.length;e++)(l+" "+n[e]).length<=15?l+=" "+n[e]:(o.push(l),l=n[e]);if(o.push(l),o.length>2){let e=o.slice(1).join(" ");o=[o[0],e.length>15?e.slice(0,15)+"...":e]}else 2===o.length&&o[1].length>15?o[1]=o[1].slice(0,15)+"...":1===o.length&&o[0].length>20&&(o=[o[0].slice(0,20)+"..."]);let c=1===o.length?4:-2;return(0,t.jsxs)("g",{transform:`translate(${r},${a})`,children:[(0,t.jsx)("title",{children:s}),(0,t.jsx)("text",{textAnchor:"end",className:"fill-muted-foreground text-xs capitalize",children:o.map((e,r)=>(0,t.jsx)("tspan",{x:-10,dy:0===r?c:14,children:e},r))})]})};function b({quizzes:e,profiles:r,sessionCounts:a}){let i=(0,c.useMemo)(()=>{let t={};return e.forEach(e=>{let r=e.category||"Uncategorized";t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,t])=>({name:e,value:t})).sort((e,t)=>t.value-e.value).slice(0,5)},[e]),s=(0,c.useMemo)(()=>Object.entries(a).map(([t,r])=>{let a=e.find(e=>e.id===t);return{name:a?.title||"Unknown Quiz",value:r}}).sort((e,t)=>t.value-e.value).slice(0,5),[a,e]),n=(0,c.useMemo)(()=>{let t={};return r.forEach(e=>{let r=e.favorite_quiz,a=[];r&&Array.isArray(r.favorites)?a=r.favorites:Array.isArray(r)&&(a=r),a.forEach(e=>{"string"==typeof e&&(t[e]=(t[e]||0)+1)})}),Object.entries(t).map(([t,r])=>{let a=e.find(e=>e.id===t);return{name:a?.title||"Unknown Quiz",value:r}}).sort((e,t)=>t.value-e.value).slice(0,5)},[r,e]);return(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(g.CardTitle,{children:"Top Categories"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)(v.ChartContainer,{config:j,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:i,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(m.CartesianGrid,{horizontal:!1}),(0,t.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:y}),(0,t.jsx)(f.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(v.ChartTooltip,{cursor:!1,content:(0,t.jsx)(v.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(x.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(g.CardTitle,{children:"Most Played"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)(v.ChartContainer,{config:j,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:s,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(m.CartesianGrid,{horizontal:!1}),(0,t.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:y}),(0,t.jsx)(f.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(v.ChartTooltip,{cursor:!1,content:(0,t.jsx)(v.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(x.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,t.jsxs)(g.Card,{children:[(0,t.jsx)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(g.CardTitle,{children:"Most Favorited"})}),(0,t.jsx)(g.CardContent,{children:(0,t.jsx)(v.ChartContainer,{config:j,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:n,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(m.CartesianGrid,{horizontal:!1}),(0,t.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:y}),(0,t.jsx)(f.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(v.ChartTooltip,{cursor:!1,content:(0,t.jsx)(v.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(x.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]})]})}function C(){let{data:e}=function(){let[e,t]=(0,c.useState)([]),[r,a]=(0,c.useState)(!0),[i,s]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let e=new AbortController,r=(0,d.getSupabaseBrowserClient)();return async function(){try{a(!0),s(null);let{data:i,error:n}=await r.from("quizzes").select("id, title, category, questions, is_hidden, is_public, created_at, language, creator:profiles!creator_id(email, fullname, avatar_url)").order("created_at",{ascending:!1}).abortSignal(e.signal);if(n){if(n.message.includes("aborted")||"AbortError"===n.name)return;s(n.message),t([])}else t((i??[]).map(e=>({...e,creator:Array.isArray(e.creator)?e.creator[0]:e.creator})));a(!1)}catch(e){if(e instanceof Error&&("AbortError"===e.name||e.message.includes("aborted")))return;s(e instanceof Error?e.message:"An error occurred"),a(!1)}}(),()=>e.abort()},[]),{data:e,loading:r,error:i,updateQuiz:async(e,r)=>{let a=(0,d.getSupabaseBrowserClient)();t(t=>t.map(t=>t.id===e?{...t,...r}:t));let{error:i}=await a.from("quizzes").update(r).eq("id",e);return i?(console.error("Error updating quiz:",i),{error:i}):{error:null}},deleteQuiz:async e=>{let r=(0,d.getSupabaseBrowserClient)();t(t=>t.filter(t=>t.id!==e));let{error:a}=await r.from("quizzes").delete().eq("id",e);return a?(console.error("Error deleting quiz:",a),{error:a}):{error:null}}}}(),{data:x,aggregates:h}=(0,u.useProfiles)(),{sessionCounts:m}=function(){let[e,t]=(0,c.useState)({}),[r,a]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{let e=(0,d.getSupabaseBrowserClient)();!async function(){try{let{data:r,error:a}=await e.from("game_sessions").select("quiz_id");if(a)throw a;let i={};r?.forEach(e=>{e.quiz_id&&(i[e.quiz_id]=(i[e.quiz_id]||0)+1)}),t(i)}catch(e){console.error("Error fetching game stats:",e)}finally{a(!1)}}()},[]),{sessionCounts:e,loading:r}}(),f=e.filter(e=>!e.is_hidden),p=h?.countries.length??0,g=h?.provinces.length??0,v=e.length+p+g;return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Master Data Dashboard"})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(n.StatCard,{title:"Quizzes",value:e.length,change:`${f.length} visible`,changeType:"neutral",icon:r.BookOpen}),(0,t.jsx)(n.StatCard,{title:"Countries",value:p,icon:a.Globe}),(0,t.jsx)(n.StatCard,{title:"Locations",value:g,icon:i.MapPin}),(0,t.jsx)(n.StatCard,{title:"Records",value:v,change:"Quizzes + locations",changeType:"neutral",icon:s.Database})]}),(0,t.jsx)("div",{children:(0,t.jsx)(b,{quizzes:e,profiles:x,sessionCounts:m})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.SectionHeader,{title:"Master Data Modules",description:"Quick access to all master data"}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(o.ActionCard,{title:"Quiz Data",description:"Manage quiz content and settings",href:"/master/quiz",icon:r.BookOpen,stats:`${e.length} quizzes`}),(0,t.jsx)(o.ActionCard,{title:"Country Data",description:"Aggregate users per country",href:"/master/country",icon:a.Globe,stats:`${p} countries`}),(0,t.jsx)(o.ActionCard,{title:"Location Data",description:"Profile locations with coordinates",href:"/master/province",icon:i.MapPin,stats:`${g} locations`})]})]})]})}e.s(["default",()=>C],41130)}]);