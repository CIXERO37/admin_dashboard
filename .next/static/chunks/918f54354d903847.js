(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,r)=>{"use strict";var a=e.r(71645),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,n=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=s({inst:{value:r,getSnapshot:t}}),i=a[0].inst,u=a[1];return l(function(){i.value=r,i.getSnapshot=t,c(i)&&u({inst:i})},[e,r,t]),n(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},41130,e=>{"use strict";var t=e.i(43476),r=e.i(10980),a=e.i(48256),i=e.i(75254);let s=(0,i.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),n=(0,i.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var l=e.i(51196),o=e.i(71645),c=e.i(15940),u=e.i(37167),d=e.i(75225),h=e.i(9694),f=e.i(72526),x=e.i(85183),g=e.i(93230),p=e.i(64476),y=e.i(73921);let m={value:{label:"Count",color:"var(--chart-1)"}},j=e=>{let{x:r,y:a,payload:i}=e,s=i.value,n=s.split(" "),l=[],o=n[0];for(let e=1;e<n.length;e++)(o+" "+n[e]).length<=15?o+=" "+n[e]:(l.push(o),o=n[e]);if(l.push(o),l.length>2){let e=l.slice(1).join(" ");l=[l[0],e.length>15?e.slice(0,15)+"...":e]}else 2===l.length&&l[1].length>15?l[1]=l[1].slice(0,15)+"...":1===l.length&&l[0].length>20&&(l=[l[0].slice(0,20)+"..."]);let c=1===l.length?4:-2;return(0,t.jsxs)("g",{transform:`translate(${r},${a})`,children:[(0,t.jsx)("title",{children:s}),(0,t.jsx)("text",{textAnchor:"end",className:"fill-muted-foreground text-xs capitalize",children:l.map((e,r)=>(0,t.jsx)("tspan",{x:-10,dy:0===r?c:14,children:e},r))})]})};function v({quizzes:e,profiles:r,sessionCounts:a}){let i=(0,o.useMemo)(()=>{let t={};return e.forEach(e=>{let r=e.category||"Uncategorized";t[r]=(t[r]||0)+1}),Object.entries(t).map(([e,t])=>({name:e,value:t})).sort((e,t)=>t.value-e.value).slice(0,5)},[e]),s=(0,o.useMemo)(()=>Object.entries(a).map(([t,r])=>{let a=e.find(e=>e.id===t);return{name:a?.title||"Unknown Quiz",value:r}}).sort((e,t)=>t.value-e.value).slice(0,5),[a,e]),n=(0,o.useMemo)(()=>{let t={};return r.forEach(e=>{let r=e.favorite_quiz,a=[];r&&Array.isArray(r.favorites)?a=r.favorites:Array.isArray(r)&&(a=r),a.forEach(e=>{"string"==typeof e&&(t[e]=(t[e]||0)+1)})}),Object.entries(t).map(([t,r])=>{let a=e.find(e=>e.id===t);return{name:a?.title||"Unknown Quiz",value:r}}).sort((e,t)=>t.value-e.value).slice(0,5)},[r,e]);return(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(p.CardTitle,{children:"Top Categories"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(y.ChartContainer,{config:m,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:i,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(f.CartesianGrid,{horizontal:!1}),(0,t.jsx)(g.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:j}),(0,t.jsx)(x.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(y.ChartTooltip,{cursor:!1,content:(0,t.jsx)(y.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(d.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(p.CardTitle,{children:"Most Played"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(y.ChartContainer,{config:m,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:s,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(f.CartesianGrid,{horizontal:!1}),(0,t.jsx)(g.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:j}),(0,t.jsx)(x.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(y.ChartTooltip,{cursor:!1,content:(0,t.jsx)(y.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(d.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(p.CardTitle,{children:"Most Favorited"})}),(0,t.jsx)(p.CardContent,{children:(0,t.jsx)(y.ChartContainer,{config:m,className:"aspect-auto h-[250px] w-full",children:(0,t.jsxs)(h.BarChart,{accessibilityLayer:!0,data:n,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,t.jsx)(f.CartesianGrid,{horizontal:!1}),(0,t.jsx)(g.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:j}),(0,t.jsx)(x.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,t.jsx)(y.ChartTooltip,{cursor:!1,content:(0,t.jsx)(y.ChartTooltipContent,{hideLabel:!0})}),(0,t.jsx)(d.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]})]})}function C(){let{data:e}=function(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[i,s]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=new AbortController,r=(0,c.getSupabaseBrowserClient)();return async function(){try{a(!0),s(null);let{data:i,error:n}=await r.from("quizzes").select("id, title, category, questions, is_hidden, is_public, created_at, language, creator:profiles!creator_id(email, fullname, avatar_url)").order("created_at",{ascending:!1}).abortSignal(e.signal);if(n){if(n.message.includes("aborted")||"AbortError"===n.name)return;s(n.message),t([])}else t((i??[]).map(e=>({...e,creator:Array.isArray(e.creator)?e.creator[0]:e.creator})));a(!1)}catch(e){if(e instanceof Error&&("AbortError"===e.name||e.message.includes("aborted")))return;s(e instanceof Error?e.message:"An error occurred"),a(!1)}}(),()=>e.abort()},[]),{data:e,loading:r,error:i,updateQuiz:async(e,r)=>{let a=(0,c.getSupabaseBrowserClient)();t(t=>t.map(t=>t.id===e?{...t,...r}:t));let{error:i}=await a.from("quizzes").update(r).eq("id",e);return i?(console.error("Error updating quiz:",i),{error:i}):{error:null}},deleteQuiz:async e=>{let r=(0,c.getSupabaseBrowserClient)();t(t=>t.filter(t=>t.id!==e));let{error:a}=await r.from("quizzes").delete().eq("id",e);return a?(console.error("Error deleting quiz:",a),{error:a}):{error:null}}}}(),{data:i,aggregates:d}=(0,u.useProfiles)(),{sessionCounts:h}=function(){let[e,t]=(0,o.useState)({}),[r,a]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=(0,c.getSupabaseBrowserClient)();!async function(){try{let{data:r,error:a}=await e.from("game_sessions").select("quiz_id");if(a)throw a;let i={};r?.forEach(e=>{e.quiz_id&&(i[e.quiz_id]=(i[e.quiz_id]||0)+1)}),t(i)}catch(e){console.error("Error fetching game stats:",e)}finally{a(!1)}}()},[]),{sessionCounts:e,loading:r}}(),f=e.filter(e=>!e.is_hidden),x=e.length-f.length,g=new Set(e.map(e=>e.category).filter(Boolean)).size;return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Master Data Dashboard"})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(l.StatCard,{title:"Quizzes",value:e.length,icon:r.BookOpen}),(0,t.jsx)(l.StatCard,{title:"Categories",value:g,icon:s}),(0,t.jsx)(l.StatCard,{title:"Public",value:f.length,icon:a.Globe}),(0,t.jsx)(l.StatCard,{title:"Private",value:x,icon:n})]}),(0,t.jsx)("div",{children:(0,t.jsx)(v,{quizzes:e,profiles:i,sessionCounts:h})})]})}e.s(["default",()=>C],41130)}]);