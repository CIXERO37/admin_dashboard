module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},85937,a=>{"use strict";var b=a.i(72131),c=a.i(95659);function d(){let[a,d]=(0,b.useState)([]),[e,f]=(0,b.useState)(!0),[g,h]=(0,b.useState)(null);return(0,b.useEffect)(()=>{let a=new AbortController,b=(0,c.getSupabaseBrowserClient)();return async function(){try{f(!0),h(null);let{data:c,error:e}=await b.from("profiles").select("*, state:states(name), city:cities(name), country:countries(name)").order("last_active",{ascending:!1,nullsFirst:!1}).abortSignal(a.signal);if(e){if(e.message.includes("aborted")||"AbortError"===e.name)return;h(e.message),d([])}else d(c??[]);f(!1)}catch(a){if(a instanceof Error&&("AbortError"===a.name||a.message.includes("aborted")))return;h(a instanceof Error?a.message:"An error occurred"),f(!1)}}(),()=>a.abort()},[]),{data:a,loading:e,error:g,aggregates:(0,b.useMemo)(()=>({countries:[],provinces:[]}),[]),updateProfile:async(a,b)=>{let e=(0,c.getSupabaseBrowserClient)();d(c=>c.map(c=>c.id===a?{...c,...b}:c));let{error:f}=await e.from("profiles").update(b).eq("id",a);return f?(console.error("Error updating profile:",f),{error:f}):{error:null}},deleteProfile:async a=>{let b=(0,c.getSupabaseBrowserClient)();d(b=>b.filter(b=>b.id!==a));let{error:e}=await b.from("profiles").delete().eq("id",a);return e?(console.error("Error deleting profile:",e),{error:e}):{error:null}}}}a.s(["useProfiles",()=>d])},23701,a=>{"use strict";var b=a.i(87924),c=a.i(53722),d=a.i(44494),e=a.i(70106);let f=(0,e.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),g=(0,e.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var h=a.i(60249),i=a.i(72131),j=a.i(95659),k=a.i(85937),l=a.i(23665),m=a.i(18155),n=a.i(54419),o=a.i(58042),p=a.i(94222),q=a.i(3130),r=a.i(12959);let s={value:{label:"Count",color:"var(--chart-1)"}},t=a=>{let{x:c,y:d,payload:e}=a,f=e.value,g=f.split(" "),h=[],i=g[0];for(let a=1;a<g.length;a++)(i+" "+g[a]).length<=15?i+=" "+g[a]:(h.push(i),i=g[a]);if(h.push(i),h.length>2){let a=h.slice(1).join(" ");h=[h[0],a.length>15?a.slice(0,15)+"...":a]}else 2===h.length&&h[1].length>15?h[1]=h[1].slice(0,15)+"...":1===h.length&&h[0].length>20&&(h=[h[0].slice(0,20)+"..."]);let j=1===h.length?4:-2;return(0,b.jsxs)("g",{transform:`translate(${c},${d})`,children:[(0,b.jsx)("title",{children:f}),(0,b.jsx)("text",{textAnchor:"end",className:"fill-muted-foreground text-xs capitalize",children:h.map((a,c)=>(0,b.jsx)("tspan",{x:-10,dy:0===c?j:14,children:a},c))})]})};function u({quizzes:a,profiles:c,sessionCounts:d}){let e=(0,i.useMemo)(()=>{let b={};return a.forEach(a=>{let c=a.category||"Uncategorized";b[c]=(b[c]||0)+1}),Object.entries(b).map(([a,b])=>({name:a,value:b})).sort((a,b)=>b.value-a.value).slice(0,5)},[a]),f=(0,i.useMemo)(()=>Object.entries(d).map(([b,c])=>{let d=a.find(a=>a.id===b);return{name:d?.title||"Unknown Quiz",value:c}}).sort((a,b)=>b.value-a.value).slice(0,5),[d,a]),g=(0,i.useMemo)(()=>{let b={};return c.forEach(a=>{let c=a.favorite_quiz,d=[];c&&Array.isArray(c.favorites)?d=c.favorites:Array.isArray(c)&&(d=c),d.forEach(a=>{"string"==typeof a&&(b[a]=(b[a]||0)+1)})}),Object.entries(b).map(([b,c])=>{let d=a.find(a=>a.id===b);return{name:d?.title||"Unknown Quiz",value:c}}).sort((a,b)=>b.value-a.value).slice(0,5)},[c,a]);return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(q.CardTitle,{children:"Top Categories"})}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)(r.ChartContainer,{config:s,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(m.BarChart,{accessibilityLayer:!0,data:e,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(n.CartesianGrid,{horizontal:!1}),(0,b.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:t}),(0,b.jsx)(o.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(r.ChartTooltip,{cursor:!1,content:(0,b.jsx)(r.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(l.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(q.CardTitle,{children:"Most Played"})}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)(r.ChartContainer,{config:s,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(m.BarChart,{accessibilityLayer:!0,data:f,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(n.CartesianGrid,{horizontal:!1}),(0,b.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:t}),(0,b.jsx)(o.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(r.ChartTooltip,{cursor:!1,content:(0,b.jsx)(r.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(l.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(q.CardTitle,{children:"Most Favorited"})}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)(r.ChartContainer,{config:s,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(m.BarChart,{accessibilityLayer:!0,data:g,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(n.CartesianGrid,{horizontal:!1}),(0,b.jsx)(p.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:t}),(0,b.jsx)(o.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(r.ChartTooltip,{cursor:!1,content:(0,b.jsx)(r.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(l.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]})]})}function v(){let{data:a}=function(){let[a,b]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[e,f]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let a=new AbortController,c=(0,j.getSupabaseBrowserClient)();return async function(){try{d(!0),f(null);let{data:e,error:g}=await c.from("quizzes").select("id, title, category, questions, is_hidden, is_public, created_at, language, creator:profiles!creator_id(email, fullname, avatar_url)").order("created_at",{ascending:!1}).abortSignal(a.signal);if(g){if(g.message.includes("aborted")||"AbortError"===g.name)return;f(g.message),b([])}else b((e??[]).map(a=>({...a,creator:Array.isArray(a.creator)?a.creator[0]:a.creator})));d(!1)}catch(a){if(a instanceof Error&&("AbortError"===a.name||a.message.includes("aborted")))return;f(a instanceof Error?a.message:"An error occurred"),d(!1)}}(),()=>a.abort()},[]),{data:a,loading:c,error:e,updateQuiz:async(a,c)=>{let d=(0,j.getSupabaseBrowserClient)();b(b=>b.map(b=>b.id===a?{...b,...c}:b));let{error:e}=await d.from("quizzes").update(c).eq("id",a);return e?(console.error("Error updating quiz:",e),{error:e}):{error:null}},deleteQuiz:async a=>{let c=(0,j.getSupabaseBrowserClient)();b(b=>b.filter(b=>b.id!==a));let{error:d}=await c.from("quizzes").delete().eq("id",a);return d?(console.error("Error deleting quiz:",d),{error:d}):{error:null}}}}(),{data:e,aggregates:l}=(0,k.useProfiles)(),{sessionCounts:m}=function(){let[a,b]=(0,i.useState)({}),[c,d]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let a=(0,j.getSupabaseBrowserClient)();!async function(){try{let{data:c,error:d}=await a.from("game_sessions").select("quiz_id");if(d)throw d;let e={};c?.forEach(a=>{a.quiz_id&&(e[a.quiz_id]=(e[a.quiz_id]||0)+1)}),b(e)}catch(a){console.error("Error fetching game stats:",a)}finally{d(!1)}}()},[]),{sessionCounts:a,loading:c}}(),n=a.filter(a=>!a.is_hidden),o=a.length-n.length,p=new Set(a.map(a=>a.category).filter(Boolean)).size;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Master Data Dashboard"})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(h.StatCard,{title:"Total Quizzes",value:a.length,icon:c.BookOpen}),(0,b.jsx)(h.StatCard,{title:"Categories",value:p,icon:f}),(0,b.jsx)(h.StatCard,{title:"Public",value:n.length,icon:d.Globe}),(0,b.jsx)(h.StatCard,{title:"Private",value:o,icon:g})]}),(0,b.jsx)("div",{children:(0,b.jsx)(u,{quizzes:a,profiles:e,sessionCounts:m})})]})}a.s(["default",()=>v],23701)}];

//# sourceMappingURL=_540ea2ef._.js.map