module.exports=[11357,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87682),e=a.i(60249),f=a.i(3130),g=a.i(23665),h=a.i(18155),i=a.i(54419),j=a.i(58042),k=a.i(94222),l=a.i(12959),m=a.i(57270);function n(a,b,c){let[d,e]=(0,m.normalizeDates)(c?.in,a,b);return d.getFullYear()===e.getFullYear()}var o=a.i(42724),p=a.i(74016);function q(a,b,c){return function(a,b,c){let d=(0,p.toDate)(a,c?.in);if(isNaN(b))return(0,o.constructFrom)(c?.in||a,NaN);if(!b)return d;let e=d.getDate(),f=(0,o.constructFrom)(c?.in||a,d.getTime());return(f.setMonth(d.getMonth()+b+1,0),e>=f.getDate())?f:(d.setFullYear(f.getFullYear(),f.getMonth(),e),d)}(a,-(12*b),c)}let r={count:{label:"Users",color:"var(--chart-1)"}};function s({profiles:a,loading:d,timeRange:e}){let m=(0,c.useMemo)(()=>((a,b)=>{if(!a)return[];if("all"===b)return a;let c=new Date,d=q(c,1);return a.filter(a=>{if(!a.created_at)return!1;let e=new Date(a.created_at);return"this-year"===b?n(e,c):"last-year"!==b||n(e,d)})})(a,e),[a,e]),o={},p={},s={};m&&m.forEach(a=>{if(a.state?.name){let b=a.state.name;o[b]=(o[b]||0)+1}if(a.city?.name){let b=a.city.name;p[b]=(p[b]||0)+1}if(a.country?.name){let b=a.country.name;s[b]=(s[b]||0)+1}});let t=Object.entries(o).map(([a,b])=>({name:a,count:b})).sort((a,b)=>b.count-a.count).slice(0,5),u=Object.entries(p).map(([a,b])=>({name:a,count:b})).sort((a,b)=>b.count-a.count).slice(0,5),v=Object.entries(s).map(([a,b])=>({name:a,count:b})).sort((a,b)=>b.count-a.count).slice(0,5);return d?(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(f.Card,{className:"h-[400px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[400px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[400px] animate-pulse bg-muted/20"})]}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(f.CardTitle,{children:"Top Countries"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(l.ChartContainer,{config:r,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(h.BarChart,{accessibilityLayer:!0,data:v,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(i.CartesianGrid,{horizontal:!1}),(0,b.jsx)(k.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:120,tickFormatter:a=>a.length>20?`${a.slice(0,20)}...`:a}),(0,b.jsx)(j.XAxis,{dataKey:"count",type:"number",hide:!0}),(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(g.Bar,{dataKey:"count",fill:"var(--color-count)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(f.CardTitle,{children:"Top States"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(l.ChartContainer,{config:r,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(h.BarChart,{accessibilityLayer:!0,data:t,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(i.CartesianGrid,{horizontal:!1}),(0,b.jsx)(k.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:120,tickFormatter:a=>a.length>20?`${a.slice(0,20)}...`:a}),(0,b.jsx)(j.XAxis,{dataKey:"count",type:"number",hide:!0}),(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(g.Bar,{dataKey:"count",fill:"var(--color-count)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(f.CardTitle,{children:"Top Cities"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(l.ChartContainer,{config:r,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(h.BarChart,{accessibilityLayer:!0,data:u,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(i.CartesianGrid,{horizontal:!1}),(0,b.jsx)(k.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:120,tickFormatter:a=>a.length>20?`${a.slice(0,20)}...`:a}),(0,b.jsx)(j.XAxis,{dataKey:"count",type:"number",hide:!0}),(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(g.Bar,{dataKey:"count",fill:"var(--color-count)",radius:[0,4,4,0],barSize:20})]})})})]})]})}var t=a.i(67149),u=a.i(27165),v=a.i(64321);let w={male:{label:"Male",color:"var(--chart-1)"},female:{label:"Female",color:"var(--chart-2)"},other:{label:"Other",color:"var(--chart-3)"}},x={count:{label:"Students"},"grade-1":{label:"1",color:"var(--chart-1)"},"grade-2":{label:"2",color:"var(--chart-2)"},"grade-3":{label:"3",color:"var(--chart-3)"},"grade-4":{label:"4",color:"var(--chart-4)"},"grade-5":{label:"5",color:"var(--chart-5)"}},y=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],z={count:{label:"Age"},"0-12":{label:"0-12",color:"var(--chart-1)"},"13-18":{label:"13-18",color:"var(--chart-2)"},"19-24":{label:"19-24",color:"var(--chart-3)"},"25-40":{label:"25-40",color:"var(--chart-4)"},"41-60":{label:"41-60",color:"var(--chart-5)"},"61+":{label:"61+",color:"var(--chart-1)"},Unknown:{label:"Unknown",color:"var(--muted)"}};function A({profiles:a,loading:c}){if(c)return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(f.Card,{className:"h-[300px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[300px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[300px] animate-pulse bg-muted/20"})]});let d={},e={},g={};a&&a.forEach(a=>{let b=a.gender||"Unknown";d[b]=(d[b]||0)+1;let c=a.grade||"Unknown";e[c]=(e[c]||0)+1;let f="Unknown";if(a.birthdate){let b=new Date(a.birthdate),c=new Date,d=c.getFullYear()-b.getFullYear(),e=c.getMonth()-b.getMonth();(e<0||0===e&&c.getDate()<b.getDate())&&d--,d>=0&&d<=12?f="0-12":d>=13&&d<=18?f="13-18":d>=19&&d<=24?f="19-24":d>=25&&d<=40?f="25-40":d>=41&&d<=60?f="41-60":d>=61&&(f="61+")}g[f]=(g[f]||0)+1});let h=Object.entries(d).map(([a,b],c)=>({name:a.charAt(0).toUpperCase()+a.slice(1),value:b,fill:y[c%y.length]})),i=Object.entries(e).map(([a,b],c)=>({name:a.charAt(0).toUpperCase()+a.slice(1),value:b,fill:y[c%y.length]})),j=Object.entries(g).sort((a,b)=>"Unknown"===a[0]?-1:"Unknown"===b[0]?1:a[0].localeCompare(b[0])).map(([a,b],c)=>({name:a,value:b,fill:y[c%y.length]}));return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Age"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)(l.ChartContainer,{config:z,className:"mx-auto aspect-square max-h-[250px] w-full",children:(0,b.jsxs)(v.PieChart,{children:[(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0,nameKey:"name"})}),(0,b.jsx)(u.Pie,{data:j,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:j.map((a,c)=>(0,b.jsx)(t.Cell,{fill:a.fill},`cell-${c}`))})]})}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:j.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.name})]},c))})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Gender"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)(l.ChartContainer,{config:w,className:"mx-auto aspect-square max-h-[250px] w-full",children:(0,b.jsxs)(v.PieChart,{children:[(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0,nameKey:"name"})}),(0,b.jsx)(u.Pie,{data:h,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:h.map((a,c)=>(0,b.jsx)(t.Cell,{fill:a.fill},`cell-${c}`))})]})}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:h.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.name})]},c))})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Education"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)(l.ChartContainer,{config:x,className:"mx-auto aspect-square max-h-[250px] w-full",children:(0,b.jsxs)(v.PieChart,{children:[(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0,nameKey:"name"})}),(0,b.jsx)(u.Pie,{data:i,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:i.map((a,c)=>(0,b.jsx)(t.Cell,{fill:a.fill},`cell-${c}`))})]})}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:i.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.name})]},c))})]})]})]})}var B=a.i(85937),C=a.i(60246),D=a.i(3314),E=a.i(70106);let F=(0,E.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),G=(0,E.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function H(){let[a,f]=(0,c.useState)("this-year"),{data:g,loading:h}=(0,B.useProfiles)(),i=(a,b)=>{if("all"===b)return!0;if(!a)return!1;let c=new Date(a),d=new Date;return"this-year"===b?n(c,d):"last-year"!==b||n(c,q(d,1))},j=g.filter(b=>i(b.created_at,a)),k=j.filter(a=>!a.role||"user"===a.role.toLowerCase()).length,l=g.filter(b=>b.role?.toLowerCase()==="admin"&&i(b.admin_since,a)).length,m=j.filter(a=>!a.is_blocked).length,o=g.filter(b=>b.is_blocked&&i(b.blocked_at,a)).length;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Administrator Dashboard"}),(0,b.jsxs)(d.Select,{value:a,onValueChange:f,children:[(0,b.jsx)(d.SelectTrigger,{className:"w-[130px] rounded-lg","aria-label":"Select a value",children:(0,b.jsx)(d.SelectValue,{placeholder:"This Year"})}),(0,b.jsxs)(d.SelectContent,{className:"rounded-xl",children:[(0,b.jsx)(d.SelectItem,{value:"this-year",className:"rounded-lg",children:"This Year"}),(0,b.jsx)(d.SelectItem,{value:"all",className:"rounded-lg",children:"All Time"}),(0,b.jsx)(d.SelectItem,{value:"last-year",className:"rounded-lg",children:"Last Year"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(e.StatCard,{title:"User",value:h?0:k,icon:C.Users,href:"/users?role=user"}),(0,b.jsx)(e.StatCard,{title:"Admin",value:h?0:l,icon:D.Shield,href:"/users?role=admin"}),(0,b.jsx)(e.StatCard,{title:"Active",value:h?0:m,icon:F,href:"/users?status=active"}),(0,b.jsx)(e.StatCard,{title:"Blocked",value:h?0:o,icon:G,href:"/users?status=blocked"})]}),(0,b.jsx)(s,{profiles:j,loading:h,timeRange:a}),(0,b.jsx)(A,{profiles:j,loading:h})]})}a.s(["default",()=>H],11357)}];

//# sourceMappingURL=app_%28dashboard%29_administrator_dashboard_page_tsx_40842b4f._.js.map