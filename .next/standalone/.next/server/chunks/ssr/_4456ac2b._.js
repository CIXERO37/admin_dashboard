module.exports=[27837,a=>{"use strict";var b=a.i(93662);function c(){return(0,b.createClient)("https://humhaknetazvqkovlxdn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh1bWhha25ldGF6dnFrb3ZseGRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxOTY0ODUsImV4cCI6MjA3NDc3MjQ4NX0.LU9j-zyUOihFE-MAgXY9-cOBPiVJDGFArH5sLpmOTxw",{auth:{autoRefreshToken:!1,persistSession:!1}})}a.s(["getSupabaseAdminClient",()=>c])},56883,a=>{"use strict";var b=a.i(37936),c=a.i(27837),d=a.i(18558);async function e({page:a=1,limit:b=15,search:d="",category:e="all",visibility:f="all"}){let g=(0,c.getSupabaseAdminClient)(),h=(a-1)*b,i=g.from("quizzes").select("id, title, description, category, questions, is_hidden, is_public, created_at, language, status, creator:profiles!creator_id(id, email, username, fullname, avatar_url)",{count:"exact"}).is("deleted_at",null);d&&(i=i.or(`title.ilike.%${d}%,category.ilike.%${d}%`)),e&&"all"!==e&&(i=i.eq("category",e)),f&&"all"!==f&&("publik"===f||"private"===f?i=i.eq("is_public","publik"===f):"active"===f?i=i.or("status.is.null,status.neq.block"):"block"===f&&(i=i.eq("status","block")));let{data:j,count:k,error:l}=await i.order("created_at",{ascending:!1}).range(h,h+b-1);if(l)return console.error("Error fetching quizzes:",l),{data:[],totalCount:0,totalPages:0,categories:[]};let{data:m}=await g.from("quizzes").select("category").is("deleted_at",null).not("category","is",null),n=[...new Set(m?.map(a=>a.category).filter(Boolean))].sort();return{data:(j??[]).map(a=>({...a,creator:Array.isArray(a.creator)?a.creator[0]??null:a.creator})),totalCount:k??0,totalPages:Math.ceil((k??0)/b),categories:n}}async function f(a,b){let e=(0,c.getSupabaseAdminClient)(),{error:f}=await e.from("quizzes").update({is_public:b}).eq("id",a);return f?(console.error("Error updating quiz:",f),{error:f.message}):((0,d.revalidatePath)("/quizzes"),{error:null})}async function g(a){let b=(0,c.getSupabaseAdminClient)(),{error:e}=await b.from("quizzes").update({status:"block"}).eq("id",a);return e?(console.error("Error blocking quiz:",e),{error:e.message}):((0,d.revalidatePath)("/quizzes"),{error:null})}async function h(a){let b=(0,c.getSupabaseAdminClient)(),{data:d,error:e}=await b.from("quizzes").select("id, title, description, category, questions, is_hidden, is_public, created_at, language, status, creator:profiles!creator_id(id, email, username, fullname, avatar_url)").eq("id",a).is("deleted_at",null).single();return e?(console.error("Error fetching quiz:",e),{data:null,error:e.message}):{data:{...d,creator:Array.isArray(d.creator)?d.creator[0]??null:d.creator},error:null}}async function i(a){let b=(0,c.getSupabaseAdminClient)(),{error:e}=await b.from("quizzes").update({deleted_at:new Date().toISOString()}).eq("id",a);return e?(console.error("Error deleting quiz:",e),{error:e.message}):((0,d.revalidatePath)("/quizzes"),(0,d.revalidatePath)("/trash-bin"),{error:null})}(0,a.i(13095).ensureServerEntryExports)([e,f,g,h,i]),(0,b.registerServerReference)(e,"408cac3bb20d8f1e30a6fbdee5f52d643c685b9686",null),(0,b.registerServerReference)(f,"605473f1748b9fc6e92c764a8613a2c822875d4393",null),(0,b.registerServerReference)(g,"408b0259b9349dd9410e93765a8acb1e4ced2170d5",null),(0,b.registerServerReference)(h,"4080eaf790a154c4987a7f92a2dd5a462682e6a7ca",null),(0,b.registerServerReference)(i,"404c79a6fafa792a3e9432a8038efece5dbd75faf5",null),a.s(["blockQuizAction",()=>g,"deleteQuizAction",()=>i,"fetchQuizById",()=>h,"fetchQuizzes",()=>e,"updateQuizVisibility",()=>f])},59006,a=>{"use strict";var b=a.i(51203),c=a.i(56883);a.s([],72146),a.i(72146),a.s(["0036e64456fb2be9f284aa63a8876a0297f090e2e1",()=>b.logout,"404c79a6fafa792a3e9432a8038efece5dbd75faf5",()=>c.deleteQuizAction,"4080eaf790a154c4987a7f92a2dd5a462682e6a7ca",()=>c.fetchQuizById,"408b0259b9349dd9410e93765a8acb1e4ced2170d5",()=>c.blockQuizAction,"408cac3bb20d8f1e30a6fbdee5f52d643c685b9686",()=>c.fetchQuizzes,"605473f1748b9fc6e92c764a8613a2c822875d4393",()=>c.updateQuizVisibility],59006)}];

//# sourceMappingURL=_4456ac2b._.js.map