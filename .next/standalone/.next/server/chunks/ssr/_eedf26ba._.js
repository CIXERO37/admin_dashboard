module.exports=[27837,a=>{"use strict";var b=a.i(93662);function c(){return(0,b.createClient)("https://humhaknetazvqkovlxdn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh1bWhha25ldGF6dnFrb3ZseGRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxOTY0ODUsImV4cCI6MjA3NDc3MjQ4NX0.LU9j-zyUOihFE-MAgXY9-cOBPiVJDGFArH5sLpmOTxw",{auth:{autoRefreshToken:!1,persistSession:!1}})}a.s(["getSupabaseAdminClient",()=>c])},15586,a=>{"use strict";var b=a.i(37936),c=a.i(27837);async function d({page:a=1,limit:b=12,search:d="",status:e="all",category:f=""}){let g=(0,c.getSupabaseAdminClient)(),h=(a-1)*b,i=g.from("groups").select("*, creator:profiles!groups_creator_id_fkey(fullname, email, avatar_url, username, state:states(name), city:cities(name))",{count:"exact"}).is("deleted_at",null);if(d&&(i=i.or(`name.ilike.%${d}%,description.ilike.%${d}%`)),e&&"all"!==e&&(i=i.eq("settings->>status",e)),f){let a=(({Campus:["Kampus","Campus"],Office:["Kantor","Office"],Family:["Keluarga","Family"],Community:["Komunitas","Community"],Mosque:["Masjid/Musholla","Masjid","Musholla","Mosque"],"Islamic Boarding School":["Pesantren","Islamic Boarding School"],School:["Sekolah","School"],General:["Umum","General"],"TPA/TPQ":["TPA/TPQ"],Other:["Lainnya","Other"]})[f]||[f]).map(a=>`category.ilike.%${a}%`).join(",");i=i.or(a)}let{data:j,count:k,error:l}=await i.order("created_at",{ascending:!1}).range(h,h+b-1);return l?(console.error("Error fetching groups:",l),{data:[],totalCount:0,totalPages:0}):{data:j??[],totalCount:k??0,totalPages:Math.ceil((k??0)/b)}}async function e(a,b){let d=(0,c.getSupabaseAdminClient)(),{error:e}=await d.from("groups").update(b).eq("id",a);return e?(console.error("Error updating group:",e),{error:e.message}):{error:null}}async function f(a){let b=(0,c.getSupabaseAdminClient)(),{error:d}=await b.from("groups").update({deleted_at:new Date().toISOString()}).eq("id",a);return d?(console.error("Error deleting group:",d),{error:d.message}):{error:null}}async function g(a){let b=(0,c.getSupabaseAdminClient)(),{data:d,error:e}=await b.from("groups").select("*, creator:profiles!groups_creator_id_fkey(fullname, email, avatar_url, username, state:states(name), city:cities(name))").eq("id",a).single();if(e)return console.error("Error fetching group:",e),{data:null,error:e.message};let f=d.members??[],g=f.map(a=>a.user_id).filter(Boolean),h={};if(g.length>0){let{data:a}=await b.from("profiles").select("id, fullname, username, avatar_url").in("id",g);a&&(h=a.reduce((a,b)=>(a[b.id]={fullname:b.fullname,username:b.username,avatar_url:b.avatar_url},a),{}))}let i=f.map(a=>({...a,fullname:a.fullname||h[a.user_id]?.fullname||null,username:a.username||h[a.user_id]?.username||null,avatar_url:a.avatar_url||h[a.user_id]?.avatar_url||null}));return{data:{...d,members_data:i,member_count:i.length},error:null}}async function h({groupId:a,page:b=1,limit:d=10,search:e="",role:f="all"}){let g=(0,c.getSupabaseAdminClient)(),h=(b-1)*d,{data:i,error:j}=await g.from("groups").select("members").eq("id",a).single();if(j||!i)return console.error("Error fetching group members:",j),{data:[],totalCount:0,totalPages:0};let k=i.members??[],l=k.map(a=>a.user_id).filter(Boolean),m={};if(l.length>0){let{data:a}=await g.from("profiles").select("id, fullname, username, avatar_url").in("id",l);a&&(m=a.reduce((a,b)=>(a[b.id]={fullname:b.fullname,username:b.username,avatar_url:b.avatar_url},a),{}))}let n=k.map(a=>({...a,fullname:a.fullname||m[a.user_id]?.fullname||null,username:a.username||m[a.user_id]?.username||null,avatar_url:a.avatar_url||m[a.user_id]?.avatar_url||null}));if(f&&"all"!==f&&(n=n.filter(a=>a.role===f)),e){let a=e.toLowerCase();n=n.filter(b=>b.fullname?.toLowerCase().includes(a)||b.username?.toLowerCase().includes(a))}n.sort((a,b)=>{let c=a.joined_at?new Date(a.joined_at).getTime():0;return(b.joined_at?new Date(b.joined_at).getTime():0)-c});let o=n.length,p=Math.ceil(o/d);return{data:n.slice(h,h+d),totalCount:o,totalPages:p}}async function i(a,b){let d=(0,c.getSupabaseAdminClient)(),{data:e,error:f}=await d.from("groups").select("members").eq("id",a).single();if(f||!e)return console.error("Error fetching group:",f),{error:f?.message||"Group not found"};let g=(e.members??[]).filter(a=>a.user_id!==b),{error:h}=await d.from("groups").update({members:g}).eq("id",a);return h?(console.error("Error removing member:",h),{error:h.message}):{error:null}}async function j(a,b,d){let e=(0,c.getSupabaseAdminClient)(),{data:f,error:g}=await e.from("groups").select("members").eq("id",a).single();if(g||!f)return console.error("Error fetching group:",g),{error:g?.message||"Group not found"};let h=(f.members??[]).map(a=>a.user_id===b?{...a,role:d}:a),{error:i}=await e.from("groups").update({members:h}).eq("id",a);return i?(console.error("Error updating member role:",i),{error:i.message}):{error:null}}async function k(){let a=(0,c.getSupabaseAdminClient)(),{data:b,error:d}=await a.from("countries").select("id, name, iso2, emoji").order("name",{ascending:!0});return d?(console.error("Error fetching countries:",d),[]):b??[]}async function l(a){let b=(0,c.getSupabaseAdminClient)(),{data:d,error:e}=await b.from("states").select("id, name, country_id").eq("country_id",a).order("name",{ascending:!0});return e?(console.error("Error fetching states:",e),[]):d??[]}async function m(a){let b=(0,c.getSupabaseAdminClient)(),{data:d,error:e}=await b.from("cities").select("id, name, state_id").eq("state_id",a).order("name",{ascending:!0});return e?(console.error("Error fetching cities:",e),[]):d??[]}async function n(){return["Campus","Office","Family","Community","Mosque","Islamic Boarding School","School","TPA/TPQ","General","Other"]}(0,a.i(13095).ensureServerEntryExports)([d,e,f,g,h,i,j,k,l,m,n]),(0,b.registerServerReference)(d,"40169399de042d62bc9e481f5bffaaf627c1729503",null),(0,b.registerServerReference)(e,"60e2a84156f8e3c90ab54fa9348811d628ab5eb62c",null),(0,b.registerServerReference)(f,"4010e9f158a0351b64ea6f389777718ce7316f31c8",null),(0,b.registerServerReference)(g,"407109ca4a6480d4b4022b7cf2f68893d493a3b0a0",null),(0,b.registerServerReference)(h,"4071b8f3ea4dfef3c7df59db4ca2cda1317140536a",null),(0,b.registerServerReference)(i,"60386ab3e84ff422e5e12f54f110c501d49d27421b",null),(0,b.registerServerReference)(j,"70da717c56f9037c463d2a6fd553bd3da5a9f8cbe0",null),(0,b.registerServerReference)(k,"0056537e2b2b49cc55ef60c123645f26dff323099d",null),(0,b.registerServerReference)(l,"4016d121d64b517854e29117eb02537b39794955a0",null),(0,b.registerServerReference)(m,"40cf93943f87642d20c7804153444f1a4200ccd00f",null),(0,b.registerServerReference)(n,"00154f96d89cc7ff6a65e6d353e76eca97aa6d3fc0",null),a.s(["deleteGroupAction",()=>f,"fetchCitiesByState",()=>m,"fetchCountries",()=>k,"fetchGroupById",()=>g,"fetchGroupCategories",()=>n,"fetchGroupMembers",()=>h,"fetchGroups",()=>d,"fetchStatesByCountry",()=>l,"removeGroupMember",()=>i,"updateGroupAction",()=>e,"updateMemberRole",()=>j])},48078,a=>{"use strict";var b=a.i(51203),c=a.i(15586);a.s([],36966),a.i(36966),a.s(["00154f96d89cc7ff6a65e6d353e76eca97aa6d3fc0",()=>c.fetchGroupCategories,"0036e64456fb2be9f284aa63a8876a0297f090e2e1",()=>b.logout,"0056537e2b2b49cc55ef60c123645f26dff323099d",()=>c.fetchCountries,"4010e9f158a0351b64ea6f389777718ce7316f31c8",()=>c.deleteGroupAction,"40169399de042d62bc9e481f5bffaaf627c1729503",()=>c.fetchGroups,"4016d121d64b517854e29117eb02537b39794955a0",()=>c.fetchStatesByCountry,"407109ca4a6480d4b4022b7cf2f68893d493a3b0a0",()=>c.fetchGroupById,"4071b8f3ea4dfef3c7df59db4ca2cda1317140536a",()=>c.fetchGroupMembers,"40cf93943f87642d20c7804153444f1a4200ccd00f",()=>c.fetchCitiesByState,"60386ab3e84ff422e5e12f54f110c501d49d27421b",()=>c.removeGroupMember,"60e2a84156f8e3c90ab54fa9348811d628ab5eb62c",()=>c.updateGroupAction,"70da717c56f9037c463d2a6fd553bd3da5a9f8cbe0",()=>c.updateMemberRole],48078)}];

//# sourceMappingURL=_eedf26ba._.js.map