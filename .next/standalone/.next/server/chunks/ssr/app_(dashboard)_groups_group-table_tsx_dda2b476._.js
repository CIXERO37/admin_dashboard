module.exports=[96414,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(60246),e=a.i(79360),f=a.i(41675),g=a.i(77156),h=a.i(81560);let i=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var j=a.i(87654),k=a.i(56711),l=a.i(72131),m=a.i(50944),n=a.i(38246),o=a.i(97895),p=a.i(40695),q=a.i(7706),r=a.i(5522),s=a.i(17171),t=a.i(54161),u=a.i(76504),v=a.i(65733),w=a.i(87682),x=a.i(70246),y=a.i(25715),z=a.i(73993),A=(0,z.createServerReference)("4010e9f158a0351b64ea6f389777718ce7316f31c8",z.callServer,void 0,z.findSourceMapURL,"deleteGroupAction"),B=a.i(95659);function C({group:a,onDelete:c}){var i;let j,l=(0,m.useRouter)(),r=a.name||"Unknown Group",s=a.avatar_url,v=(0,o.getAvatarUrl)(a.cover_url),w=(j=a.settings,j?.status==="private"?{label:"PRIVATE",variant:"outline"}:{label:"PUBLIC",variant:"secondary"}),x=function(a){let b=a.creator;if(b?.state?.name||b?.city?.name)return[b.state?.name,b.city?.name].filter(Boolean).join(", ");let c=a.settings;return c?.location||"-"}(a),y=r.split(" ").map(a=>a[0]).join("").slice(0,3).toUpperCase(),z=a.creator,A=z?.fullname||"Unknown";z?.email;let B=A.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase();return(0,b.jsxs)("div",{className:"group relative flex flex-col overflow-hidden rounded-2xl border border-border bg-card shadow-lg transition-all duration-300 hover:shadow-xl hover:border-primary/50 cursor-pointer",onClick:()=>{l.push(`/groups/${a.id}`)},children:[(0,b.jsxs)("div",{className:"relative p-4 bg-muted overflow-hidden h-32",children:[v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:v,alt:r,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 to-black/60"})]}):(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-primary/10 to-transparent"}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.Badge,{variant:w.variant,className:`text-[10px] font-semibold px-2 py-0.5 ${"secondary"===w.variant?"bg-green-500/90 text-white border-green-500":"bg-black/50 border-white/30 text-white"}`,children:w.label}),a.category&&(0,b.jsx)(t.Badge,{variant:"outline",className:"text-[10px] font-semibold px-2 py-0.5 bg-black/50 border-white/30 text-white uppercase",children:{kampus:"Campus",kantor:"Office",keluarga:"Family",komunitas:"Community","masjid/musholla":"Mosque",pesantren:"Islamic Boarding School",sekolah:"School","tpa/tpq":"TPA/TPQ",umum:"General",lainnya:"Other",campus:"Campus",office:"Office",family:"Family",community:"Community",mosque:"Mosque","islamic boarding school":"Islamic Boarding School",school:"School",general:"General",other:"Other"}[a.category?a.category.toLowerCase():""]||a.category})]}),(0,b.jsxs)(u.DropdownMenu,{children:[(0,b.jsx)(u.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(p.Button,{variant:"ghost",size:"icon",className:`h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity ${v?"text-white hover:bg-white/20":""}`,children:(0,b.jsx)(e.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(u.DropdownMenuItem,{asChild:!0,className:"cursor-pointer",children:(0,b.jsxs)(n.default,{href:`/groups/${a.id}`,children:[(0,b.jsx)(g.Eye,{className:"h-4 w-4 mr-2"}),"Detail"]})}),(0,b.jsx)(u.DropdownMenuSeparator,{}),(0,b.jsxs)(u.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),c(a.id,r)},className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,b.jsx)(h.Trash2,{className:"h-4 w-4 mr-2"}),"Move to Trash"]})]})]})]}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center gap-3",children:[(0,b.jsxs)(q.Avatar,{className:"h-12 w-12 border-2 border-white/50 shadow-md ring-2 ring-background",children:[(0,b.jsx)(q.AvatarImage,{src:(0,o.getAvatarUrl)(s),alt:r,className:"object-cover"}),(0,b.jsx)(q.AvatarFallback,{className:"bg-muted text-muted-foreground font-bold text-sm",children:y})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:`font-bold text-base truncate leading-tight ${v?"text-white":"text-foreground"}`,title:r,children:r}),(0,b.jsx)("p",{className:`text-xs truncate mt-0.5 ${v?"text-white/80":"text-muted-foreground"}`,title:x,children:x})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 p-4 pt-3",children:[(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-2",children:"Created by"}),(0,b.jsxs)(n.default,{href:`/users/${a.creator_id}`,className:"flex items-center gap-2 hover:bg-muted/50 rounded-lg p-1 -m-1 transition-colors",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)(q.Avatar,{className:"h-8 w-8 border border-border",children:[(0,b.jsx)(q.AvatarImage,{src:(0,o.getAvatarUrl)(z?.avatar_url),alt:A}),(0,b.jsx)(q.AvatarFallback,{className:"bg-muted text-muted-foreground text-xs font-medium",children:B})]}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate hover:text-primary transition-colors",title:A,children:A}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate",title:`@${z?.username||"-"}`,children:["@",z?.username||"-"]})]})]})]}),(0,b.jsxs)("div",{className:"px-4 py-3 border-t border-border/50 bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(f.Calendar,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:(i=a.created_at)?(0,k.format)(new Date(i),"d MMM yyyy"):"-"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(d.Users,{className:"h-3.5 w-3.5"}),(0,b.jsxs)("span",{children:[a.member_count," Members"]})]})]}),(0,b.jsx)(p.Button,{className:"w-full gap-2 bg-primary hover:bg-primary/90 text-primary-foreground font-medium",size:"sm",asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsxs)(n.default,{href:`/groups/${a.id}`,children:[(0,b.jsx)(g.Eye,{className:"h-4 w-4"}),"Detail"]})})]})]})}function D({initialData:a,totalPages:e,currentPage:f,searchQuery:g,statusFilter:h="all",countries:k,categories:n}){let q=(0,m.useRouter)(),t=(0,m.useSearchParams)(),[u,z]=(0,l.useTransition)(),[D,E]=(0,l.useState)(g),{toast:F}=(0,x.useToast)(),[G,H]=(0,l.useState)({open:!1,id:"",groupName:"",confirmText:""}),[I,J]=(0,l.useState)(!1),[K,L]=(0,l.useState)({country:t.get("country")||"",state:t.get("state")||"",city:t.get("city")||"",status:h,category:t.get("category")||""}),[M,N]=(0,l.useState)([]),[O,P]=(0,l.useState)([]),[Q,R]=(0,l.useState)(!1),[S,T]=(0,l.useState)(!1),U=k.map(a=>({value:String(a.id),label:a.name})),V=M.map(a=>({value:String(a.id),label:a.name})),W=O.map(a=>({value:String(a.id),label:a.name})),X=n.map(a=>({value:a,label:a})),Y=async a=>{if(L(b=>({...b,country:a,state:"",city:""})),N([]),P([]),a){R(!0);let b=(0,B.getSupabaseBrowserClient)(),{data:c}=await b.from("states").select("id, name, country_id").eq("country_id",Number(a)).order("name");N(c??[]),R(!1)}},Z=async a=>{if(L(b=>({...b,state:a,city:""})),P([]),a){T(!0);let b=(0,B.getSupabaseBrowserClient)(),{data:c}=await b.from("cities").select("id, name, state_id").eq("state_id",Number(a)).order("name");P(c??[]),T(!1)}},$=(a,b)=>{H({open:!0,id:a,groupName:b,confirmText:""})},_=async()=>{if("Move to Trash"!==G.confirmText)return;let{error:a}=await A(G.id);a?F({title:"Error",description:"Failed to move group to trash",variant:"destructive"}):(F({title:"Success",description:"Group moved to trash successfully"}),q.refresh()),H(a=>({...a,open:!1,confirmText:""}))},aa=a=>{let b=new URLSearchParams(t.toString());Object.entries(a).forEach(([a,c])=>{c&&""!==c&&"all"!==c?b.set(a,String(c)):b.delete(a)}),z(()=>{q.push(`?${b.toString()}`)})},ab=()=>{aa({search:D,page:1})},ac=a=>{aa({page:a,search:g,status:h}),window.scrollTo({top:0,behavior:"smooth"})},ad=a.map(a=>({...a,member_count:a.members?.length??0}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Groups"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(r.Input,{placeholder:"Search group...",className:"pr-10 w-64 bg-background border-border",value:D,onChange:a=>E(a.target.value),onKeyDown:a=>{"Enter"===a.key&&ab()}}),(0,b.jsx)("button",{onClick:ab,disabled:u,className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 flex items-center justify-center rounded-md bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors",children:(0,b.jsx)(c.Search,{className:"h-3.5 w-3.5"})})]}),(0,b.jsx)(p.Button,{variant:"outline",size:"icon",className:"h-10 w-10 bg-black border-black hover:bg-black/80",onClick:()=>J(!0),children:(0,b.jsx)(i,{className:"h-4 w-4 text-white"})})]})]}),(0,b.jsx)("div",{className:u?"opacity-60 pointer-events-none":"",children:ad.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ad.map(a=>(0,b.jsx)(C,{group:a,onDelete:$},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center border border-dashed border-border rounded-lg",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center mb-3",children:(0,b.jsx)(d.Users,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-base font-medium text-foreground mb-1",children:"No groups found"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:g?"No groups match your search":"No groups available yet"})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-border bg-card px-6 py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page"," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:f})," of"," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:e||1})]}),e>1&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>ac(f-1),disabled:1===f||u,className:(0,o.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",1===f||u?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Previous"}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let a=[];if(e<=7)for(let b=1;b<=e;b++)a.push(b);else a.push(1),f<=3?a.push(2,3,4,"...",e):f>=e-2?a.push("...",e-3,e-2,e-1,e):a.push("...",f-1,f,f+1,"...",e);return a.map((a,c)=>"..."===a?(0,b.jsx)("span",{className:"w-9 h-9 flex items-center justify-center text-sm text-muted-foreground",children:"..."},`ellipsis-${c}`):(0,b.jsx)("button",{onClick:()=>ac(a),disabled:u,className:(0,o.cn)("w-9 h-9 text-sm font-medium rounded-lg border transition-colors cursor-pointer",f===a?"border-primary bg-primary text-primary-foreground":"border-border bg-card text-foreground hover:bg-secondary/80"),children:a},a))})()}),(0,b.jsx)("button",{onClick:()=>ac(f+1),disabled:f===e||u,className:(0,o.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",f===e||u?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Next"})]})]}),(0,b.jsx)(v.Dialog,{open:G.open,onOpenChange:a=>H(b=>({...b,open:a,confirmText:""})),children:(0,b.jsxs)(v.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{children:"Move to Trash"}),(0,b.jsxs)(v.DialogDescription,{children:["Are you sure you want to move"," ",(0,b.jsx)("strong",{children:G.groupName})," to the trash bin? You can restore it later."]})]}),(0,b.jsxs)("div",{className:"grid gap-2 py-4",children:[(0,b.jsxs)(s.Label,{htmlFor:"confirmDelete",children:["Type ",(0,b.jsx)("strong",{className:"text-destructive",children:"Move to Trash"})," ","to confirm"]}),(0,b.jsx)(r.Input,{id:"confirmDelete",value:G.confirmText,onChange:a=>H(b=>({...b,confirmText:a.target.value})),placeholder:"Type 'Move to Trash' here"})]}),(0,b.jsxs)(v.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(p.Button,{variant:"outline",onClick:()=>H(a=>({...a,open:!1,confirmText:""})),children:"Cancel"}),(0,b.jsx)(p.Button,{variant:"destructive",onClick:_,disabled:"Move to Trash"!==G.confirmText,children:"Move to Trash"})]})]})}),(0,b.jsx)(v.Dialog,{open:I,onOpenChange:J,children:(0,b.jsxs)(v.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsx)(v.DialogHeader,{children:(0,b.jsxs)(v.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i,{className:"h-5 w-5 text-primary"}),"Filter"]})}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)(y.Combobox,{options:X,value:K.category,onValueChange:a=>L(b=>({...b,category:a})),placeholder:"Select Category",searchPlaceholder:"Search category...",emptyText:"No category found.",className:"w-full"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"country",children:"Country"}),(0,b.jsx)(y.Combobox,{options:U,value:K.country,onValueChange:Y,placeholder:"Select Country",searchPlaceholder:"Search country...",emptyText:"No country found.",className:"w-full"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"state",children:"State"}),(0,b.jsx)(y.Combobox,{options:V,value:K.state,onValueChange:Z,placeholder:Q?"Loading...":"Select State",searchPlaceholder:"Search state...",emptyText:K.country?"No state found.":"Select country first",className:"w-full",disabled:!K.country})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"city",children:"City"}),(0,b.jsx)(y.Combobox,{options:W,value:K.city,onValueChange:a=>L(b=>({...b,city:a})),placeholder:S?"Loading...":"Select City",searchPlaceholder:"Search city...",emptyText:K.state?"No city found.":"Select state first",className:"w-full",disabled:!K.state})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"status",children:"Status"}),(0,b.jsxs)(w.Select,{value:K.status,onValueChange:a=>L(b=>({...b,status:a})),children:[(0,b.jsx)(w.SelectTrigger,{id:"status",className:"w-full",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select Status"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(w.SelectItem,{value:"public",children:"Public"}),(0,b.jsx)(w.SelectItem,{value:"private",children:"Private"})]})]})]})]}),(0,b.jsxs)(v.DialogFooter,{className:"flex-row gap-2 sm:justify-between",children:[(0,b.jsxs)(p.Button,{variant:"ghost",onClick:()=>{L({country:"",state:"",city:"",status:"all",category:""}),N([]),P([])},className:"gap-2",children:[(0,b.jsx)(j.RotateCcw,{className:"h-4 w-4"}),"Reset"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(p.Button,{variant:"outline",onClick:()=>{L({country:t.get("country")||"",state:t.get("state")||"",city:t.get("city")||"",status:h,category:t.get("category")||""}),J(!1)},children:"Cancel"}),(0,b.jsx)(p.Button,{onClick:()=>{aa({country:K.country,state:K.state,city:K.city,status:K.status,category:K.category,page:1}),J(!1)},className:"bg-primary hover:bg-primary/90",children:"Apply"})]})]})]})})]})}a.s(["GroupTable",()=>D],96414)}];

//# sourceMappingURL=app_%28dashboard%29_groups_group-table_tsx_dda2b476._.js.map