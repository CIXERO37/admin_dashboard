module.exports=[51804,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(93314),e=a.i(41675),f=a.i(33441),g=a.i(33508),h=a.i(42724),i=a.i(44513),j=a.i(52587),k=a.i(23464),l=a.i(57270),m=a.i(74016);function n(a,b){let c=(0,m.toDate)(a)-(0,m.toDate)(b);return c<0?-1:c>0?1:c}var o=a.i(59296),p=a.i(72131),q=a.i(50944),r=a.i(38246),s=a.i(97895),t=a.i(40695),u=a.i(54161),v=a.i(7706),w=a.i(5522),x=a.i(70246),y=a.i(18188),z=a.i(46569),A=a.i(65733),B=a.i(17171),C=a.i(46893),D=a.i(87682),E=a.i(72162);function F({quiz:a,onApprove:c,onReject:p}){var w,x;let y=(0,q.useRouter)(),z=Array.isArray(a.questions)?a.questions.length:0,A=a.cover_image||a.image_url,B=(a.creator?.fullname||"?").split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase();return(0,b.jsxs)("div",{className:"group relative flex flex-col overflow-hidden rounded-2xl border border-border bg-card shadow-lg transition-all duration-300 hover:shadow-xl hover:border-primary/50 cursor-pointer",onClick:()=>{y.push(`/quiz-approval/${a.id}`)},children:[(0,b.jsxs)("div",{className:"relative h-32 bg-gradient-to-br from-primary/20 via-primary/10 to-transparent overflow-hidden",children:[A&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:A,alt:a.title,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 to-black/40"})]}),(0,b.jsxs)("div",{className:"absolute top-3 left-3 right-3 flex items-center justify-between",children:[(0,b.jsx)(u.Badge,{variant:"outline",className:"text-[10px] font-semibold px-2 py-0.5 bg-black/60 text-white border-white/20",children:a.category?.toUpperCase()||"UNCATEGORIZED"}),(0,b.jsx)(u.Badge,{variant:"outline",className:"text-[10px] font-semibold px-2 py-0.5 bg-yellow-500/90 text-white border-yellow-500",children:"PENDING"})]}),(0,b.jsx)("div",{className:"absolute bottom-3 right-3",children:(0,b.jsxs)(u.Badge,{variant:"secondary",className:"gap-1 bg-black/50 text-white border-0",children:[(0,b.jsx)(d.FileQuestion,{className:"h-3 w-3"}),z," Questions"]})})]}),(0,b.jsxs)("div",{className:"flex-1 p-4 space-y-3",children:[(0,b.jsx)("h3",{className:"font-bold text-base text-foreground line-clamp-2",title:a.title,children:a.title}),(0,b.jsxs)(r.default,{href:`/users/${a.creator?.id}`,className:"flex items-center gap-2",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)(v.Avatar,{className:"h-8 w-8 border border-border",children:[(0,b.jsx)(v.AvatarImage,{src:(0,s.getAvatarUrl)(a.creator?.avatar_url),alt:a.creator?.fullname||""}),(0,b.jsx)(v.AvatarFallback,{className:"bg-muted text-muted-foreground text-xs font-medium",children:B})]}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate hover:text-primary transition-colors",title:a.creator?.fullname||"Unknown",children:a.creator?.fullname||"Unknown"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground truncate",title:`@${a.creator?.username||"-"}`,children:["@",a.creator?.username||"-"]})]})]})]}),(0,b.jsxs)("div",{className:"px-4 py-3 border-t border-border/50 bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(e.Calendar,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:a.created_at?(w=new Date(a.created_at),x={addSuffix:!0},function(a,b,c){var d;let e,f=(0,j.getDefaultOptions)(),g=c?.locale??f.locale??i.defaultLocale,h=n(a,b);if(isNaN(h))throw RangeError("Invalid time value");let p=Object.assign({},c,{addSuffix:c?.addSuffix,comparison:h}),[q,r]=(0,l.normalizeDates)(c?.in,...h>0?[b,a]:[a,b]),s=(d=void 0,a=>{let b=(d?Math[d]:Math.trunc)(a);return 0===b?0:b})(((0,m.toDate)(r)-(0,m.toDate)(q))/1e3),t=Math.round((s-((0,k.getTimezoneOffsetInMilliseconds)(r)-(0,k.getTimezoneOffsetInMilliseconds)(q))/1e3)/60);if(t<2)if(c?.includeSeconds)if(s<5)return g.formatDistance("lessThanXSeconds",5,p);else if(s<10)return g.formatDistance("lessThanXSeconds",10,p);else if(s<20)return g.formatDistance("lessThanXSeconds",20,p);else if(s<40)return g.formatDistance("halfAMinute",0,p);else if(s<60)return g.formatDistance("lessThanXMinutes",1,p);else return g.formatDistance("xMinutes",1,p);else if(0===t)return g.formatDistance("lessThanXMinutes",1,p);else return g.formatDistance("xMinutes",t,p);if(t<45)return g.formatDistance("xMinutes",t,p);if(t<90)return g.formatDistance("aboutXHours",1,p);if(t<o.minutesInDay){let a=Math.round(t/60);return g.formatDistance("aboutXHours",a,p)}if(t<2520)return g.formatDistance("xDays",1,p);else if(t<o.minutesInMonth){let a=Math.round(t/o.minutesInDay);return g.formatDistance("xDays",a,p)}else if(t<2*o.minutesInMonth)return e=Math.round(t/o.minutesInMonth),g.formatDistance("aboutXMonths",e,p);if((e=function(a,b,c){var d,e;let f,g,h,i,[j,k,o]=(0,l.normalizeDates)(void 0,a,a,b),p=n(k,o),q=Math.abs(function(a,b,c){let[d,e]=(0,l.normalizeDates)(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(k,o));if(q<1)return 0;1===k.getMonth()&&k.getDate()>27&&k.setDate(30),k.setMonth(k.getMonth()-p*q);let r=n(k,o)===-p;+(f=(0,m.toDate)(j,void 0),d=void 0,(g=(0,m.toDate)(f,d?.in)).setHours(23,59,59,999),g)==+(e=void 0,i=(h=(0,m.toDate)(f,e?.in)).getMonth(),h.setFullYear(h.getFullYear(),i+1,0),h.setHours(23,59,59,999),h)&&1===q&&1===n(j,o)&&(r=!1);let s=p*(q-r);return 0===s?0:s}(r,q))<12){let a=Math.round(t/o.minutesInMonth);return g.formatDistance("xMonths",a,p)}{let a=e%12,b=Math.trunc(e/12);return a<3?g.formatDistance("aboutXYears",b,p):a<9?g.formatDistance("overXYears",b,p):g.formatDistance("almostXYears",b+1,p)}}(w,(0,h.constructFrom)(w,Date.now()),x)):"-"})]}),(0,b.jsx)("span",{className:"uppercase text-[10px] font-medium",children:a.language||"ID"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(t.Button,{className:"flex-1 gap-1.5 bg-emerald-500 hover:bg-emerald-600 text-white font-medium cursor-pointer shadow-sm hover:shadow-md transition-all duration-200",size:"sm",onClick:b=>{b.stopPropagation(),c(a.id,a.title)},children:[(0,b.jsx)(f.Check,{className:"h-4 w-4"}),"Approve"]}),(0,b.jsxs)(t.Button,{variant:"outline",className:"flex-1 gap-1.5 border-red-300 text-red-600 hover:bg-red-50 hover:text-red-700 hover:border-red-400 font-medium cursor-pointer transition-all duration-200 dark:border-red-800 dark:text-red-400 dark:hover:bg-red-950 dark:hover:text-red-300",size:"sm",onClick:b=>{b.stopPropagation(),p(a.id,a.title)},children:[(0,b.jsx)(g.X,{className:"h-4 w-4"}),"Reject"]})]})]})]})}function G({initialData:a,totalPages:e,currentPage:f,totalCount:g,searchQuery:h,categories:i,categoryFilter:j}){let k=(0,q.useRouter)(),l=(0,q.useSearchParams)(),[m,n]=(0,p.useTransition)(),[o,r]=(0,p.useState)(h),{toast:u}=(0,x.useToast)(),[v,G]=(0,p.useState)({open:!1,id:"",title:""}),[H,I]=(0,p.useState)(""),[J,K]=(0,p.useState)({open:!1,id:"",title:""}),L=(a,b)=>{K({open:!0,id:a,title:b})},M=async()=>{let{id:a,title:b}=J;if(!a)return;let{error:c}=await (0,y.approveQuizAction)(a);c?u({title:"Error",description:"Failed to approve quiz",variant:"destructive"}):(u({title:"Success",description:`Quiz "${b}" has been approved successfully`}),k.refresh()),K(a=>({...a,open:!1}))},N=(a,b)=>{G({open:!0,id:a,title:b}),I("")},O=async()=>{let{id:a,title:b}=v;if(!a)return;if(!H.trim())return void u({title:"Error",description:"Please provide a rejection reason",variant:"destructive"});let{error:c}=await (0,z.rejectQuizAction)(a,H);c?u({title:"Error",description:"Failed to reject quiz",variant:"destructive"}):(u({title:"Success",description:`Quiz "${b}" has been rejected`}),k.refresh()),G(a=>({...a,open:!1}))},P=a=>{let b=new URLSearchParams(l.toString());Object.entries(a).forEach(([a,c])=>{c&&""!==c&&"all"!==c?b.set(a,String(c)):b.delete(a)}),n(()=>{k.push(`?${b.toString()}`)})},Q=()=>{P({search:o,page:1})},R=a=>{P({page:a,search:h,category:j}),window.scrollTo({top:0,behavior:"smooth"})};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Quiz Approval"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(w.Input,{placeholder:"Search quiz...",className:"pr-10 w-64 bg-background border-border",value:o,onChange:a=>r(a.target.value),onKeyDown:a=>{"Enter"===a.key&&Q()}}),(0,b.jsx)("button",{onClick:Q,disabled:m,className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 flex items-center justify-center rounded-md bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 transition-colors cursor-pointer",children:(0,b.jsx)(c.Search,{className:"h-3.5 w-3.5"})})]}),(0,b.jsxs)(D.Select,{value:j,onValueChange:a=>P({category:a,page:1}),children:[(0,b.jsx)(D.SelectTrigger,{className:"w-36",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.SlidersHorizontal,{className:"h-4 w-4"}),(0,b.jsx)(D.SelectValue,{placeholder:"Category"})]})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)(D.SelectItem,{value:"all",children:"All Category"}),i.map(a=>{var c;return(0,b.jsx)(D.SelectItem,{value:a,children:(c=a)&&"-"!==c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():c},a)})]})]})]})]}),(0,b.jsx)("div",{className:m?"opacity-60 pointer-events-none":"",children:a.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:a.map(a=>(0,b.jsx)(F,{quiz:a,onApprove:L,onReject:N},a.id))}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center border border-dashed border-border rounded-lg",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center mb-3",children:(0,b.jsx)(d.FileQuestion,{className:"h-6 w-6 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-base font-medium text-foreground mb-1",children:"No quizzes pending approval"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:h?"No quizzes match your search":"All quizzes have been reviewed"})]})}),e>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-border bg-card px-6 py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page"," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:f})," ","of"," ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:e||1})]}),e>1&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>R(f-1),disabled:1===f||m,className:(0,s.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",1===f||m?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Previous"}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(e,5)},(a,c)=>{let d=c+1;return e>5&&(f>3&&(d=f-2+c),f>e-2&&(d=e-4+c)),(0,b.jsx)("button",{onClick:()=>R(d),disabled:m,className:(0,s.cn)("w-9 h-9 text-sm font-medium rounded-lg border transition-colors cursor-pointer",f===d?"border-primary bg-primary text-primary-foreground":"border-border bg-card text-foreground hover:bg-secondary/80"),children:d},d)})}),(0,b.jsx)("button",{onClick:()=>R(f+1),disabled:f===e||m,className:(0,s.cn)("px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors",f===e||m?"border-border bg-secondary/50 text-muted-foreground cursor-not-allowed":"border-border bg-card text-foreground hover:bg-secondary/80 cursor-pointer"),children:"Next"})]})]}),(0,b.jsx)(A.Dialog,{open:J.open,onOpenChange:a=>K(b=>({...b,open:a})),children:(0,b.jsxs)(A.DialogContent,{children:[(0,b.jsxs)(A.DialogHeader,{children:[(0,b.jsx)(A.DialogTitle,{children:"Approve Quiz"}),(0,b.jsx)(A.DialogDescription,{children:"Are you sure you want to approve this quiz?"})]}),(0,b.jsxs)(A.DialogFooter,{children:[(0,b.jsx)(t.Button,{variant:"outline",onClick:()=>K(a=>({...a,open:!1})),children:"Cancel"}),(0,b.jsx)(t.Button,{className:"bg-emerald-500 hover:bg-emerald-600 text-white",onClick:M,children:"Approve"})]})]})}),(0,b.jsx)(A.Dialog,{open:v.open,onOpenChange:a=>G(b=>({...b,open:a})),children:(0,b.jsxs)(A.DialogContent,{children:[(0,b.jsx)(A.DialogHeader,{children:(0,b.jsx)(A.DialogTitle,{children:"Reject Quiz"})}),(0,b.jsxs)("div",{className:"grid gap-2 py-2",children:[(0,b.jsx)(B.Label,{htmlFor:"reason",children:"Reason for Rejection"}),(0,b.jsx)(C.Textarea,{id:"reason",placeholder:"e.g., Inappropriate content, Low image quality, etc.",value:H,onChange:a=>I(a.target.value),className:"h-24 resize-none"})]}),(0,b.jsxs)(A.DialogFooter,{children:[(0,b.jsx)(t.Button,{variant:"outline",onClick:()=>G(a=>({...a,open:!1})),children:"Cancel"}),(0,b.jsx)(t.Button,{variant:"destructive",onClick:O,disabled:!H.trim(),children:"Reject"})]})]})})]})}a.s(["QuizApprovalTable",()=>G],51804)}];

//# sourceMappingURL=app_%28dashboard%29_quiz-approval_quiz-approval-table_tsx_1cedabdc._.js.map