module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},12451,a=>{"use strict";var b=a.i(87924),c=a.i(38246);let d=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function e({title:a,description:e,href:f,icon:g,stats:h}){return(0,b.jsx)(c.default,{href:f,children:(0,b.jsx)("div",{className:"group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20 hover:-translate-y-1",children:(0,b.jsxs)("div",{className:"relative space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"rounded-lg bg-secondary p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,b.jsx)(g,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})}),h&&(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:h})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:a}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:e})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm font-medium text-primary opacity-0 transition-all duration-300 group-hover:opacity-100",children:[(0,b.jsx)("span",{children:"View details"}),(0,b.jsx)(d,{className:"ml-1 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"})]})]})})})}a.s(["ActionCard",()=>e],12451)},85185,a=>{"use strict";var b=a.i(87924);function c({title:a,description:c,action:d}){return(0,b.jsxs)("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:a}),c&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:c})]}),d&&(0,b.jsx)("div",{className:"mt-2 sm:mt-0",children:d})]})}a.s(["SectionHeader",()=>c])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},60249,a=>{"use strict";var b=a.i(87924),c=a.i(97895),d=a.i(38246);function e({title:a,value:e,change:f,changeType:g="neutral",icon:h,description:i,href:j}){let k=(0,c.cn)("group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20",j&&"cursor-pointer block"),l=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/80 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,b.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a}),(0,b.jsx)("p",{className:"text-3xl font-bold tracking-tight text-foreground",suppressHydrationWarning:!0,children:e}),f&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:(0,c.cn)("text-xs font-medium","increase"===g&&"text-[var(--success)]","decrease"===g&&"text-destructive","neutral"===g&&"text-muted-foreground"),children:f}),i&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:i})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-primary/10 p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,b.jsx)(h,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})})]})]});return j?(0,b.jsx)(d.default,{href:j,className:k,children:l}):(0,b.jsx)("div",{className:k,children:l})}a.s(["StatCard",()=>e])},12959,2274,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48662),e=a.i(59854),f=a.i(35112),g=a.i(20353),h=a.i(98621),i=a.i(3190),j=a.i(76805),k=a.i(52517),l=a.i(87293);function m(){return(m=Object.assign.bind()).apply(null,arguments)}function n(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var o={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function p(a){var b,{data:d,iconType:e,inactiveColor:f}=a,g=32/6,h=32/3,i=d.inactive?f:d.color,k=null!=e?e:d.type;if("none"===k)return null;if("plainline"===k)return c.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:null==(b=d.payload)?void 0:b.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===k)return c.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(16,"h").concat(h,"\n            A").concat(g,",").concat(g,",0,1,1,").concat(2*h,",").concat(16,"\n            H").concat(32,"M").concat(2*h,",").concat(16,"\n            A").concat(g,",").concat(g,",0,1,1,").concat(h,",").concat(16),className:"recharts-legend-icon"});if("rect"===k)return c.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(c.isValidElement(d.legendIcon)){var l=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?n(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},d);return delete l.legendIcon,c.cloneElement(d.legendIcon,l)}return c.createElement(j.Symbols,{fill:i,cx:16,cy:16,size:32,sizeType:"diameter",type:k})}function q(a){var{payload:b,iconSize:d,layout:e,formatter:f,inactiveColor:g,iconType:j}=a,l={x:0,y:0,width:32,height:32},n={display:"horizontal"===e?"inline-block":"block",marginRight:10},o={display:"inline-block",verticalAlign:"middle",marginRight:4};return b.map((b,e)=>{var q=b.formatter||f,r=(0,h.clsx)({"recharts-legend-item":!0,["legend-item-".concat(e)]:!0,inactive:b.inactive});if("none"===b.type)return null;var s=b.inactive?g:b.color,t=q?q(b.value,b,e):b.value;return c.createElement("li",m({className:r,style:n,key:"legend-item-".concat(e)},(0,k.adaptEventsOfChild)(a,b,e)),c.createElement(i.Surface,{width:d,height:d,viewBox:l,style:o,"aria-label":"".concat(t," legend icon")},c.createElement(p,{data:b,iconType:j,inactiveColor:g})),c.createElement("span",{className:"recharts-legend-item-text",style:{color:s}},t))})}var r=a=>{var b=(0,l.resolveDefaultProps)(a,o),{payload:d,layout:e,align:f}=b;return d&&d.length?c.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===e?f:"left"}},c.createElement(q,m({},b,{payload:d}))):null},s=a.i(68932),t=a.i(63643),u=a.i(77368),v=a.i(24993),w=a.i(38620),x=a.i(98382),y=a.i(21402),z=["contextPayload"];function A(){return(A=Object.assign.bind()).apply(null,arguments)}function B(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function C(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?B(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):B(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function D(a){return a.value}function E(a){var{contextPayload:b}=a,d=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,z),e=(0,t.getUniqPayload)(b,a.payloadUniqBy,D),f=C(C({},d),{},{payload:e});return c.isValidElement(a.content)?c.cloneElement(a.content,f):"function"==typeof a.content?c.createElement(a.content,f):c.createElement(r,f)}function F(a){var b=(0,u.useAppDispatch)();return(0,c.useEffect)(()=>{b((0,y.setLegendSettings)(a))},[b,a]),null}function G(a){var b=(0,u.useAppDispatch)();return(0,c.useEffect)(()=>(b((0,y.setLegendSize)(a)),()=>{b((0,y.setLegendSize)({width:0,height:0}))}),[b,a]),null}var H={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function I(a){var b,d=(0,l.resolveDefaultProps)(a,H),e=(0,u.useAppSelector)(v.selectLegendPayload),h=(0,g.useLegendPortal)(),i=(0,x.useMargin)(),{width:j,height:k,wrapperStyle:m,portal:n}=d,[o,p]=(0,w.useElementOffset)([e]),q=(0,x.useChartWidth)(),r=(0,x.useChartHeight)();if(null==q||null==r)return null;var t=q-((null==i?void 0:i.left)||0)-((null==i?void 0:i.right)||0),y=(b=d.layout,"vertical"===b&&(0,s.isNumber)(k)?{height:k}:"horizontal"===b?{width:j||t}:null),z=n?m:C(C({position:"absolute",width:(null==y?void 0:y.width)||j||"auto",height:(null==y?void 0:y.height)||k||"auto"},function(a,b,c,d,e,f){var g,h,{layout:i,align:j,verticalAlign:k}=b;return a&&(void 0!==a.left&&null!==a.left||void 0!==a.right&&null!==a.right)||(g="center"===j&&"vertical"===i?{left:((d||0)-f.width)/2}:"right"===j?{right:c&&c.right||0}:{left:c&&c.left||0}),a&&(void 0!==a.top&&null!==a.top||void 0!==a.bottom&&null!==a.bottom)||(h="middle"===k?{top:((e||0)-f.height)/2}:"bottom"===k?{bottom:c&&c.bottom||0}:{top:c&&c.top||0}),C(C({},g),h)}(m,d,i,q,r,o)),m),B=null!=n?n:h;if(null==B||null==e)return null;var D=c.createElement("div",{className:"recharts-legend-wrapper",style:z,ref:p},c.createElement(F,{layout:d.layout,align:d.align,verticalAlign:d.verticalAlign,itemSorter:d.itemSorter}),!n&&c.createElement(G,{width:o.width,height:o.height}),c.createElement(E,A({},d,y,{margin:i,chartWidth:q,chartHeight:r,contextPayload:e})));return(0,f.createPortal)(D,B)}I.displayName="Legend",a.s(["Legend",()=>I],2274);var J=a.i(97895);let K={light:"",dark:".dark"},L=c.createContext(null);function M({id:a,className:e,children:f,config:g,...h}){let i=c.useId(),j=`chart-${a||i.replace(/:/g,"")}`;return(0,b.jsx)(L.Provider,{value:{config:g},children:(0,b.jsxs)("div",{"data-slot":"chart","data-chart":j,className:(0,J.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",e),...h,children:[(0,b.jsx)(N,{id:j,config:g}),(0,b.jsx)(d.ResponsiveContainer,{children:f})]})})}let N=({id:a,config:c})=>{let d=Object.entries(c).filter(([,a])=>a.theme||a.color);return d.length?(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(K).map(([b,c])=>`
${c} [data-chart=${a}] {
${d.map(([a,c])=>{let d=c.theme?.[b]||c.color;return d?`  --color-${a}: ${d};`:null}).join("\n")}
}
`).join("\n")}}):null},O=e.Tooltip;function P({active:a,payload:d,className:e,indicator:f="dot",hideLabel:g=!1,hideIndicator:h=!1,label:i,labelFormatter:j,labelClassName:k,formatter:l,color:m,nameKey:n,labelKey:o}){let{config:p}=function(){let a=c.useContext(L);if(!a)throw Error("useChart must be used within a <ChartContainer />");return a}(),q=c.useMemo(()=>{if(g||!d?.length)return null;let[a]=d,c=`${o||a?.dataKey||a?.name||"value"}`,e=Q(p,a,c),f=o||"string"!=typeof i?e?.label:p[i]?.label||i;return j?(0,b.jsx)("div",{className:(0,J.cn)("font-medium",k),children:j(f,d)}):f?(0,b.jsx)("div",{className:(0,J.cn)("font-medium",k),children:f}):null},[i,j,d,g,k,p,o]);if(!a||!d?.length)return null;let r=1===d.length&&"dot"!==f;return(0,b.jsxs)("div",{className:(0,J.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",e),children:[r?null:q,(0,b.jsx)("div",{className:"grid gap-1.5",children:d.map((a,c)=>{let d=`${n||a.name||a.dataKey||"value"}`,e=Q(p,a,d),g=m||a.payload?.fill||a.color;return(0,b.jsx)("div",{className:(0,J.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===f&&"items-center"),children:l&&a?.value!==void 0&&a.name?l(a.value,a.name,a,c,a.payload):(0,b.jsxs)(b.Fragment,{children:[e?.icon?(0,b.jsx)(e.icon,{}):!h&&(0,b.jsx)("div",{className:(0,J.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===f,"w-1":"line"===f,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===f,"my-0.5":r&&"dashed"===f}),style:{"--color-bg":g,"--color-border":g}}),(0,b.jsxs)("div",{className:(0,J.cn)("flex flex-1 justify-between leading-none",r?"items-end":"items-center"),children:[(0,b.jsxs)("div",{className:"grid gap-1.5",children:[r?q:null,(0,b.jsx)("span",{className:"text-muted-foreground",children:e?.label||a.name})]}),a.value&&(0,b.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:a.value.toLocaleString()})]})]})},a.dataKey)})})]})}function Q(a,b,c){if("object"!=typeof b||null===b)return;let d="payload"in b&&"object"==typeof b.payload&&null!==b.payload?b.payload:void 0,e=c;return c in b&&"string"==typeof b[c]?e=b[c]:d&&c in d&&"string"==typeof d[c]&&(e=d[c]),e in a?a[e]:a[c]}a.s(["ChartContainer",()=>M,"ChartTooltip",()=>O,"ChartTooltipContent",()=>P],12959)},85937,a=>{"use strict";var b=a.i(72131),c=a.i(95659);function d(){let[a,d]=(0,b.useState)([]),[e,f]=(0,b.useState)(!0),[g,h]=(0,b.useState)(null);return(0,b.useEffect)(()=>{let a=new AbortController,b=(0,c.getSupabaseBrowserClient)();return async function(){try{f(!0),h(null);let{data:c,error:e}=await b.from("profiles").select("*, state:states(name), city:cities(name), country:countries(name)").order("last_active",{ascending:!1,nullsFirst:!1}).abortSignal(a.signal);if(e){if(e.message.includes("aborted")||"AbortError"===e.name)return;h(e.message),d([])}else d(c??[]);f(!1)}catch(a){if(a instanceof Error&&("AbortError"===a.name||a.message.includes("aborted")))return;h(a instanceof Error?a.message:"An error occurred"),f(!1)}}(),()=>a.abort()},[]),{data:a,loading:e,error:g,aggregates:(0,b.useMemo)(()=>({countries:[],provinces:[]}),[]),updateProfile:async(a,b)=>{let e=(0,c.getSupabaseBrowserClient)();d(c=>c.map(c=>c.id===a?{...c,...b}:c));let{error:f}=await e.from("profiles").update(b).eq("id",a);return f?(console.error("Error updating profile:",f),{error:f}):{error:null}},deleteProfile:async a=>{let b=(0,c.getSupabaseBrowserClient)();d(b=>b.filter(b=>b.id!==a));let{error:e}=await b.from("profiles").delete().eq("id",a);return e?(console.error("Error deleting profile:",e),{error:e}):{error:null}}}}a.s(["useProfiles",()=>d])},23701,a=>{"use strict";var b=a.i(87924),c=a.i(53722),d=a.i(44494),e=a.i(24987),f=a.i(20494),g=a.i(60249),h=a.i(12451),i=a.i(85185),j=a.i(72131),k=a.i(95659),l=a.i(85937),m=a.i(23665),n=a.i(18155),o=a.i(54419),p=a.i(58042),q=a.i(94222),r=a.i(3130),s=a.i(12959);let t={value:{label:"Count",color:"var(--chart-1)"}},u=a=>{let{x:c,y:d,payload:e}=a,f=e.value,g=f.split(" "),h=[],i=g[0];for(let a=1;a<g.length;a++)(i+" "+g[a]).length<=15?i+=" "+g[a]:(h.push(i),i=g[a]);if(h.push(i),h.length>2){let a=h.slice(1).join(" ");h=[h[0],a.length>15?a.slice(0,15)+"...":a]}else 2===h.length&&h[1].length>15?h[1]=h[1].slice(0,15)+"...":1===h.length&&h[0].length>20&&(h=[h[0].slice(0,20)+"..."]);let j=1===h.length?4:-2;return(0,b.jsxs)("g",{transform:`translate(${c},${d})`,children:[(0,b.jsx)("title",{children:f}),(0,b.jsx)("text",{textAnchor:"end",className:"fill-muted-foreground text-xs capitalize",children:h.map((a,c)=>(0,b.jsx)("tspan",{x:-10,dy:0===c?j:14,children:a},c))})]})};function v({quizzes:a,profiles:c,sessionCounts:d}){let e=(0,j.useMemo)(()=>{let b={};return a.forEach(a=>{let c=a.category||"Uncategorized";b[c]=(b[c]||0)+1}),Object.entries(b).map(([a,b])=>({name:a,value:b})).sort((a,b)=>b.value-a.value).slice(0,5)},[a]),f=(0,j.useMemo)(()=>Object.entries(d).map(([b,c])=>{let d=a.find(a=>a.id===b);return{name:d?.title||"Unknown Quiz",value:c}}).sort((a,b)=>b.value-a.value).slice(0,5),[d,a]),g=(0,j.useMemo)(()=>{let b={};return c.forEach(a=>{let c=a.favorite_quiz,d=[];c&&Array.isArray(c.favorites)?d=c.favorites:Array.isArray(c)&&(d=c),d.forEach(a=>{"string"==typeof a&&(b[a]=(b[a]||0)+1)})}),Object.entries(b).map(([b,c])=>{let d=a.find(a=>a.id===b);return{name:d?.title||"Unknown Quiz",value:c}}).sort((a,b)=>b.value-a.value).slice(0,5)},[c,a]);return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)(r.Card,{children:[(0,b.jsx)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(r.CardTitle,{children:"Top Categories"})}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)(s.ChartContainer,{config:t,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(n.BarChart,{accessibilityLayer:!0,data:e,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(o.CartesianGrid,{horizontal:!1}),(0,b.jsx)(q.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:u}),(0,b.jsx)(p.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(s.ChartTooltip,{cursor:!1,content:(0,b.jsx)(s.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(m.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(r.Card,{children:[(0,b.jsx)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(r.CardTitle,{children:"Most Played"})}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)(s.ChartContainer,{config:t,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(n.BarChart,{accessibilityLayer:!0,data:f,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(o.CartesianGrid,{horizontal:!1}),(0,b.jsx)(q.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:u}),(0,b.jsx)(p.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(s.ChartTooltip,{cursor:!1,content:(0,b.jsx)(s.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(m.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(r.Card,{children:[(0,b.jsx)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(r.CardTitle,{children:"Most Favorited"})}),(0,b.jsx)(r.CardContent,{children:(0,b.jsx)(s.ChartContainer,{config:t,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(n.BarChart,{accessibilityLayer:!0,data:g,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(o.CartesianGrid,{horizontal:!1}),(0,b.jsx)(q.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:160,tick:u}),(0,b.jsx)(p.XAxis,{dataKey:"value",type:"number",hide:!0}),(0,b.jsx)(s.ChartTooltip,{cursor:!1,content:(0,b.jsx)(s.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(m.Bar,{dataKey:"value",fill:"var(--color-value)",radius:[0,4,4,0],barSize:20})]})})})]})]})}function w(){let{data:a}=function(){let[a,b]=(0,j.useState)([]),[c,d]=(0,j.useState)(!0),[e,f]=(0,j.useState)(null);return(0,j.useEffect)(()=>{let a=new AbortController,c=(0,k.getSupabaseBrowserClient)();return async function(){try{d(!0),f(null);let{data:e,error:g}=await c.from("quizzes").select("id, title, category, questions, is_hidden, is_public, created_at, language, creator:profiles!creator_id(email, fullname, avatar_url)").order("created_at",{ascending:!1}).abortSignal(a.signal);if(g){if(g.message.includes("aborted")||"AbortError"===g.name)return;f(g.message),b([])}else b((e??[]).map(a=>({...a,creator:Array.isArray(a.creator)?a.creator[0]:a.creator})));d(!1)}catch(a){if(a instanceof Error&&("AbortError"===a.name||a.message.includes("aborted")))return;f(a instanceof Error?a.message:"An error occurred"),d(!1)}}(),()=>a.abort()},[]),{data:a,loading:c,error:e,updateQuiz:async(a,c)=>{let d=(0,k.getSupabaseBrowserClient)();b(b=>b.map(b=>b.id===a?{...b,...c}:b));let{error:e}=await d.from("quizzes").update(c).eq("id",a);return e?(console.error("Error updating quiz:",e),{error:e}):{error:null}},deleteQuiz:async a=>{let c=(0,k.getSupabaseBrowserClient)();b(b=>b.filter(b=>b.id!==a));let{error:d}=await c.from("quizzes").delete().eq("id",a);return d?(console.error("Error deleting quiz:",d),{error:d}):{error:null}}}}(),{data:m,aggregates:n}=(0,l.useProfiles)(),{sessionCounts:o}=function(){let[a,b]=(0,j.useState)({}),[c,d]=(0,j.useState)(!0);return(0,j.useEffect)(()=>{let a=(0,k.getSupabaseBrowserClient)();!async function(){try{let{data:c,error:d}=await a.from("game_sessions").select("quiz_id");if(d)throw d;let e={};c?.forEach(a=>{a.quiz_id&&(e[a.quiz_id]=(e[a.quiz_id]||0)+1)}),b(e)}catch(a){console.error("Error fetching game stats:",a)}finally{d(!1)}}()},[]),{sessionCounts:a,loading:c}}(),p=a.filter(a=>!a.is_hidden),q=n?.countries.length??0,r=n?.provinces.length??0,s=a.length+q+r;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Master Data Dashboard"})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(g.StatCard,{title:"Quizzes",value:a.length,change:`${p.length} visible`,changeType:"neutral",icon:c.BookOpen}),(0,b.jsx)(g.StatCard,{title:"Countries",value:q,icon:d.Globe}),(0,b.jsx)(g.StatCard,{title:"Locations",value:r,icon:e.MapPin}),(0,b.jsx)(g.StatCard,{title:"Records",value:s,change:"Quizzes + locations",changeType:"neutral",icon:f.Database})]}),(0,b.jsx)("div",{children:(0,b.jsx)(v,{quizzes:a,profiles:m,sessionCounts:o})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.SectionHeader,{title:"Master Data Modules",description:"Quick access to all master data"}),(0,b.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsx)(h.ActionCard,{title:"Quiz Data",description:"Manage quiz content and settings",href:"/master/quiz",icon:c.BookOpen,stats:`${a.length} quizzes`}),(0,b.jsx)(h.ActionCard,{title:"Country Data",description:"Aggregate users per country",href:"/master/country",icon:d.Globe,stats:`${q} countries`}),(0,b.jsx)(h.ActionCard,{title:"Location Data",description:"Profile locations with coordinates",href:"/master/province",icon:e.MapPin,stats:`${r} locations`})]})]})]})}a.s(["default",()=>w],23701)}];

//# sourceMappingURL=_8a5348e3._.js.map