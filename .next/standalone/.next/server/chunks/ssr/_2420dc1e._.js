module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},60249,a=>{"use strict";var b=a.i(87924),c=a.i(97895),d=a.i(38246);function e({title:a,value:e,change:f,changeType:g="neutral",icon:h,description:i,href:j}){let k=(0,c.cn)("group relative overflow-hidden rounded-xl border border-border bg-card p-6 transition-all duration-300 hover:border-primary hover:shadow-xl hover:shadow-primary/20",j&&"cursor-pointer block"),l=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/80 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,b.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a}),(0,b.jsx)("p",{className:"text-3xl font-bold tracking-tight text-foreground",suppressHydrationWarning:!0,children:e}),f&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:(0,c.cn)("text-xs font-medium","increase"===g&&"text-[var(--success)]","decrease"===g&&"text-destructive","neutral"===g&&"text-muted-foreground"),children:f}),i&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:i})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-primary/10 p-3 transition-all duration-300 group-hover:bg-primary group-hover:scale-110",children:(0,b.jsx)(h,{className:"h-5 w-5 text-primary transition-colors group-hover:text-primary-foreground"})})]})]});return j?(0,b.jsx)(d.default,{href:j,className:k,children:l}):(0,b.jsx)("div",{className:k,children:l})}a.s(["StatCard",()=>e])},42724,59296,a=>{"use strict";let b=Symbol.for("constructDateFrom");function c(a,c){return"function"==typeof a?a(c):a&&"object"==typeof a&&b in a?a[b](c):a instanceof Date?new a.constructor(c):new Date(c)}a.s(["constructFromSymbol",0,b,"millisecondsInDay",0,864e5,"millisecondsInWeek",0,6048e5,"minutesInDay",0,1440,"minutesInMonth",0,43200],59296),a.s(["constructFrom",()=>c],42724)},57270,a=>{"use strict";var b=a.i(42724);function c(a,...d){let e=b.constructFrom.bind(null,a||d.find(a=>"object"==typeof a));return d.map(e)}a.s(["normalizeDates",()=>c])},74016,a=>{"use strict";var b=a.i(42724);function c(a,c){return(0,b.constructFrom)(c||a,a)}a.s(["toDate",()=>c])},98091,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["default",()=>b])},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},85937,a=>{"use strict";var b=a.i(72131),c=a.i(95659);function d(){let[a,d]=(0,b.useState)([]),[e,f]=(0,b.useState)(!0),[g,h]=(0,b.useState)(null);return(0,b.useEffect)(()=>{let a=new AbortController,b=(0,c.getSupabaseBrowserClient)();return async function(){try{f(!0),h(null);let{data:c,error:e}=await b.from("profiles").select("*, state:states(name), city:cities(name)").order("last_active",{ascending:!1,nullsFirst:!1}).abortSignal(a.signal);if(e){if(e.message.includes("aborted")||"AbortError"===e.name)return;h(e.message),d([])}else d(c??[]);f(!1)}catch(a){if(a instanceof Error&&("AbortError"===a.name||a.message.includes("aborted")))return;h(a instanceof Error?a.message:"An error occurred"),f(!1)}}(),()=>a.abort()},[]),{data:a,loading:e,error:g,aggregates:(0,b.useMemo)(()=>({countries:[],provinces:[]}),[]),updateProfile:async(a,b)=>{let e=(0,c.getSupabaseBrowserClient)();d(c=>c.map(c=>c.id===a?{...c,...b}:c));let{error:f}=await e.from("profiles").update(b).eq("id",a);return f?(console.error("Error updating profile:",f),{error:f}):{error:null}},deleteProfile:async a=>{let b=(0,c.getSupabaseBrowserClient)();d(b=>b.filter(b=>b.id!==a));let{error:e}=await b.from("profiles").delete().eq("id",a);return e?(console.error("Error deleting profile:",e),{error:e}):{error:null}}}}a.s(["useProfiles",()=>d])},11357,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87682),e=a.i(60249),f=a.i(3130),g=a.i(23665),h=a.i(18155),i=a.i(54419),j=a.i(58042),k=a.i(94222),l=a.i(12959),m=a.i(57270);function n(a,b,c){let[d,e]=(0,m.normalizeDates)(c?.in,a,b);return d.getFullYear()===e.getFullYear()}var o=a.i(42724),p=a.i(74016);let q={count:{label:"Users",color:"var(--chart-1)"}},r=(a,b)=>{var c;if(!a)return[];if("all"===b)return a;let d=new Date,e=(c=0,function(a,b,c){let d=(0,p.toDate)(a,c?.in);if(isNaN(-12))return(0,o.constructFrom)(c?.in||a,NaN);0;let e=d.getDate(),f=(0,o.constructFrom)(c?.in||a,d.getTime());return(f.setMonth(d.getMonth()+-12+1,0),e>=f.getDate())?f:(d.setFullYear(f.getFullYear(),f.getMonth(),e),d)}(d,-12,void 0));return a.filter(a=>{if(!a.created_at)return!1;let c=new Date(a.created_at);return"this-year"===b?n(c,d):"last-year"!==b||n(c,e)})};function s({profiles:a,loading:d,timeRange:e}){let m=(0,c.useMemo)(()=>r(a,e),[a,e]),n=(0,c.useMemo)(()=>r(a,e),[a,e]),o={};m&&m.forEach(a=>{if(a.state?.name){let b=a.state.name;o[b]=(o[b]||0)+1}});let p={};n&&n.forEach(a=>{if(a.city?.name){let b=a.city.name;p[b]=(p[b]||0)+1}});let s=Object.entries(o).map(([a,b])=>({name:a,count:b})).sort((a,b)=>b.count-a.count).slice(0,5),t=Object.entries(p).map(([a,b])=>({name:a,count:b})).sort((a,b)=>b.count-a.count).slice(0,5);return d?(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(f.Card,{className:"h-[400px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[400px] animate-pulse bg-muted/20"})]}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(f.CardTitle,{children:"Top States"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(l.ChartContainer,{config:q,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(h.BarChart,{accessibilityLayer:!0,data:s,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(i.CartesianGrid,{horizontal:!1}),(0,b.jsx)(k.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:120,tickFormatter:a=>a.length>20?`${a.slice(0,20)}...`:a}),(0,b.jsx)(j.XAxis,{dataKey:"count",type:"number",hide:!0}),(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(g.Bar,{dataKey:"count",fill:"var(--color-count)",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,b.jsx)(f.CardTitle,{children:"Top Cities"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)(l.ChartContainer,{config:q,className:"aspect-auto h-[250px] w-full",children:(0,b.jsxs)(h.BarChart,{accessibilityLayer:!0,data:t,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[(0,b.jsx)(i.CartesianGrid,{horizontal:!1}),(0,b.jsx)(k.YAxis,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,width:120,tickFormatter:a=>a.length>20?`${a.slice(0,20)}...`:a}),(0,b.jsx)(j.XAxis,{dataKey:"count",type:"number",hide:!0}),(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0})}),(0,b.jsx)(g.Bar,{dataKey:"count",fill:"var(--color-count)",radius:[0,4,4,0],barSize:20})]})})})]})]})}var t=a.i(67149),u=a.i(27165),v=a.i(64321);let w={male:{label:"Male",color:"var(--chart-1)"},female:{label:"Female",color:"var(--chart-2)"},other:{label:"Other",color:"var(--chart-3)"}},x={count:{label:"Students"},"grade-1":{label:"1",color:"var(--chart-1)"},"grade-2":{label:"2",color:"var(--chart-2)"},"grade-3":{label:"3",color:"var(--chart-3)"},"grade-4":{label:"4",color:"var(--chart-4)"},"grade-5":{label:"5",color:"var(--chart-5)"}},y=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"];function z({profiles:a,loading:c}){if(c)return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(f.Card,{className:"h-[300px] animate-pulse bg-muted/20"}),(0,b.jsx)(f.Card,{className:"h-[300px] animate-pulse bg-muted/20"})]});let d={},e={};a&&a.forEach(a=>{let b=a.gender||"Unknown";d[b]=(d[b]||0)+1;let c=a.grade||"Unknown";e[c]=(e[c]||0)+1});let g=Object.entries(d).map(([a,b],c)=>({name:a.charAt(0).toUpperCase()+a.slice(1),value:b,fill:y[c%y.length]})),h=Object.entries(e).map(([a,b],c)=>({name:a.charAt(0).toUpperCase()+a.slice(1),value:b,fill:y[c%y.length]}));return(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Gender"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)(l.ChartContainer,{config:w,className:"mx-auto aspect-square max-h-[250px] w-full",children:(0,b.jsxs)(v.PieChart,{children:[(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0,nameKey:"name"})}),(0,b.jsx)(u.Pie,{data:g,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:g.map((a,c)=>(0,b.jsx)(t.Cell,{fill:a.fill},`cell-${c}`))})]})}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:g.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.name})]},c))})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Grade"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)(l.ChartContainer,{config:x,className:"mx-auto aspect-square max-h-[250px] w-full",children:(0,b.jsxs)(v.PieChart,{children:[(0,b.jsx)(l.ChartTooltip,{cursor:!1,content:(0,b.jsx)(l.ChartTooltipContent,{hideLabel:!0,nameKey:"name"})}),(0,b.jsx)(u.Pie,{data:h,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:h.map((a,c)=>(0,b.jsx)(t.Cell,{fill:a.fill},`cell-${c}`))})]})}),(0,b.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:h.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:a.fill}}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.name})]},c))})]})]})]})}var A=a.i(85937),B=a.i(60246),C=a.i(3314),D=a.i(70106);let E=(0,D.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),F=(0,D.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function G(){let[a,f]=(0,c.useState)("all"),{data:g,loading:h}=(0,A.useProfiles)(),i=g.filter(a=>!a.role||"user"===a.role.toLowerCase()).length,j=g.filter(a=>a.role?.toLowerCase()==="admin").length,k=g.filter(a=>!a.is_blocked).length,l=g.filter(a=>a.is_blocked).length;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Administrator Dashboard"}),(0,b.jsxs)(d.Select,{value:a,onValueChange:f,children:[(0,b.jsx)(d.SelectTrigger,{className:"w-[130px] rounded-lg","aria-label":"Select a value",children:(0,b.jsx)(d.SelectValue,{placeholder:"All Time"})}),(0,b.jsxs)(d.SelectContent,{className:"rounded-xl",children:[(0,b.jsx)(d.SelectItem,{value:"all",className:"rounded-lg",children:"All Time"}),(0,b.jsx)(d.SelectItem,{value:"this-year",className:"rounded-lg",children:"This Year"}),(0,b.jsx)(d.SelectItem,{value:"last-year",className:"rounded-lg",children:"Last Year"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(e.StatCard,{title:"User",value:h?0:i,icon:B.Users,href:"/users?role=user"}),(0,b.jsx)(e.StatCard,{title:"Admin",value:h?0:j,icon:C.Shield,href:"/users?role=admin"}),(0,b.jsx)(e.StatCard,{title:"Active",value:h?0:k,icon:E,href:"/users?status=active"}),(0,b.jsx)(e.StatCard,{title:"Blocked",value:h?0:l,icon:F,href:"/users?status=blocked"})]}),(0,b.jsx)(s,{profiles:g,loading:h,timeRange:a}),(0,b.jsx)(z,{profiles:g,loading:h})]})}a.s(["default",()=>G],11357)}];

//# sourceMappingURL=_2420dc1e._.js.map