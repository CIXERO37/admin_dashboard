module.exports=[87033,a=>{"use strict";var b=a.i(37936),c=a.i(89227);async function d({page:a=1,limit:b=15,search:d="",country:e="all",state:f="all"}){let g=await (0,c.getSupabaseServerClient)(),h=(a-1)*b,i=g.from("cities").select("id, name, native, state_id, state_code, country_id, country_code, latitude, longitude",{count:"exact"});d&&(i=i.or(`name.ilike.%${d}%,native.ilike.%${d}%,state_code.ilike.%${d}%`)),e&&"all"!==e&&(i=i.eq("country_code",e)),f&&"all"!==f&&(i=i.eq("state_code",f));let{data:j,count:k,error:l}=await i.order("name",{ascending:!0}).range(h,h+b-1);if(l)return console.error("Error fetching cities:",l),{data:[],totalCount:0,totalPages:0,countries:[],states:[]};let{data:m}=await g.from("cities").select("country_code").not("country_code","is",null),n=[...new Set(m?.map(a=>a.country_code).filter(Boolean))].sort(),o=g.from("cities").select("state_code").not("state_code","is",null);e&&"all"!==e&&(o=o.eq("country_code",e));let{data:p}=await o;return{data:j??[],totalCount:k??0,totalPages:Math.ceil((k??0)/b),countries:n,states:[...new Set(p?.map(a=>a.state_code).filter(Boolean))].sort()}}async function e(a){let b=await (0,c.getSupabaseServerClient)(),{data:d,error:e}=await b.from("cities").select("*").eq("id",a).single();return e?(console.error("Error fetching city:",e),null):d}(0,a.i(13095).ensureServerEntryExports)([d,e]),(0,b.registerServerReference)(d,"405d40ba4952378f7ae7965f5d262d9a5f3450acbc",null),(0,b.registerServerReference)(e,"40646e06b42d4f92a06c7791928d104030bd5bbc16",null),a.s(["fetchCities",()=>d,"fetchCityById",()=>e])},50954,a=>{"use strict";var b=a.i(51203),c=a.i(87033);a.s([],55318),a.i(55318),a.s(["0036e64456fb2be9f284aa63a8876a0297f090e2e1",()=>b.logout,"405d40ba4952378f7ae7965f5d262d9a5f3450acbc",()=>c.fetchCities,"40646e06b42d4f92a06c7791928d104030bd5bbc16",()=>c.fetchCityById],50954)}];

//# sourceMappingURL=_ad645750._.js.map